{
	"name": "Level",
	"events": [
		{
			"eventType": "comment",
			"text": "Player generic"
		},
		{
			"eventType": "variable",
			"name": "PLAYER_acceleration",
			"type": "number",
			"initialValue": "960",
			"comment": "Player acceleration",
			"isStatic": false,
			"isConstant": true,
			"sid": 145403278563700
		},
		{
			"eventType": "variable",
			"name": "PLAYER_deceleration",
			"type": "number",
			"initialValue": "480",
			"comment": "Player deceleration",
			"isStatic": false,
			"isConstant": true,
			"sid": 462746515280793
		},
		{
			"eventType": "variable",
			"name": "PLAYER_horizontalScale",
			"type": "number",
			"initialValue": "1",
			"comment": "Scale of horizontal movement",
			"isStatic": false,
			"isConstant": false,
			"sid": 350094314629677
		},
		{
			"eventType": "variable",
			"name": "PLAYER_verticalScale",
			"type": "number",
			"initialValue": "1",
			"comment": "Scale of vertical movement",
			"isStatic": false,
			"isConstant": false,
			"sid": 221727381265021
		},
		{
			"eventType": "variable",
			"name": "PLAYER_drink",
			"type": "number",
			"initialValue": "1",
			"comment": "Player's currently selected drink",
			"isStatic": false,
			"isConstant": false,
			"sid": 665310254127078
		},
		{
			"eventType": "comment",
			"text": "Player Z axis"
		},
		{
			"eventType": "variable",
			"name": "PLAYER_speedZ",
			"type": "number",
			"initialValue": "0",
			"comment": "Player speed on Z axis",
			"isStatic": false,
			"isConstant": false,
			"sid": 389877224228659
		},
		{
			"eventType": "variable",
			"name": "PLAYER_gravity",
			"type": "number",
			"initialValue": "8",
			"comment": "World gravity",
			"isStatic": false,
			"isConstant": true,
			"sid": 972546084609050
		},
		{
			"eventType": "variable",
			"name": "PLAYER_onGround",
			"type": "boolean",
			"initialValue": "false",
			"comment": "Is the player on the ground?",
			"isStatic": false,
			"isConstant": false,
			"sid": 947656755172177
		},
		{
			"eventType": "comment",
			"text": "Player camera"
		},
		{
			"eventType": "variable",
			"name": "PLAYER_cameraZ",
			"type": "number",
			"initialValue": "0",
			"comment": "Player camera Z axis",
			"isStatic": false,
			"isConstant": false,
			"sid": 450597940854371
		},
		{
			"eventType": "variable",
			"name": "PLAYER_cameraHeight",
			"type": "number",
			"initialValue": "22",
			"comment": "Player camera height",
			"isStatic": false,
			"isConstant": true,
			"sid": 503732180526647
		},
		{
			"eventType": "variable",
			"name": "PLAYER_mouseLook",
			"type": "number",
			"initialValue": "0",
			"comment": "Player mouse look variable",
			"isStatic": false,
			"isConstant": false,
			"sid": 588190454549215
		},
		{
			"eventType": "variable",
			"name": "PLAYER_mouseLock",
			"type": "boolean",
			"initialValue": "false",
			"comment": "Is camera mouse input allowed?",
			"isStatic": false,
			"isConstant": false,
			"sid": 945003251081519
		},
		{
			"eventType": "comment",
			"text": "Game statistics"
		},
		{
			"eventType": "variable",
			"name": "STAT_goodTime",
			"type": "number",
			"initialValue": "20",
			"comment": "Predefined 'good' time goal",
			"isStatic": false,
			"isConstant": true,
			"sid": 579642125891631
		},
		{
			"eventType": "variable",
			"name": "STAT_badTime",
			"type": "number",
			"initialValue": "600",
			"comment": "Predefined 'bad' time goal",
			"isStatic": false,
			"isConstant": true,
			"sid": 132605635925236
		},
		{
			"eventType": "variable",
			"name": "STAT_suckTime",
			"type": "number",
			"initialValue": "3600",
			"comment": "Your time sucks!",
			"isStatic": false,
			"isConstant": true,
			"sid": 143505027899183
		},
		{
			"eventType": "variable",
			"name": "STAT_observationsMax",
			"type": "number",
			"initialValue": "0",
			"comment": "Max observations, calculated at runtime",
			"isStatic": false,
			"isConstant": false,
			"sid": 188136801285503
		},
		{
			"eventType": "variable",
			"name": "STAT_itemsMax",
			"type": "number",
			"initialValue": "0",
			"comment": "Max items, calculated at runtime",
			"isStatic": false,
			"isConstant": false,
			"sid": 895082177503771
		},
		{
			"eventType": "variable",
			"name": "STAT_time",
			"type": "number",
			"initialValue": "0",
			"comment": "Time spent in level",
			"isStatic": false,
			"isConstant": false,
			"sid": 967556292368998
		},
		{
			"eventType": "variable",
			"name": "STAT_wealth",
			"type": "number",
			"initialValue": "100",
			"comment": "Amount of money available to spend",
			"isStatic": false,
			"isConstant": false,
			"sid": 137732999540059
		},
		{
			"eventType": "variable",
			"name": "STAT_cheese",
			"type": "number",
			"initialValue": "0",
			"comment": "Cheese; functionally useless",
			"isStatic": false,
			"isConstant": false,
			"sid": 356237393539857
		},
		{
			"eventType": "variable",
			"name": "STAT_observations",
			"type": "number",
			"initialValue": "0",
			"comment": "Amount of artworks interacted with",
			"isStatic": false,
			"isConstant": false,
			"sid": 392782409982667
		},
		{
			"eventType": "variable",
			"name": "STAT_items",
			"type": "number",
			"initialValue": "0",
			"comment": "Amount of items picked up",
			"isStatic": false,
			"isConstant": false,
			"sid": 514392794931958
		},
		{
			"eventType": "variable",
			"name": "STAT_moneySpent",
			"type": "number",
			"initialValue": "0",
			"comment": "Amount of money spent",
			"isStatic": false,
			"isConstant": false,
			"sid": 713077309590567
		},
		{
			"eventType": "variable",
			"name": "STAT_secrets",
			"type": "number",
			"initialValue": "0",
			"comment": "Amount of secrets found",
			"isStatic": false,
			"isConstant": false,
			"sid": 233567711124690
		},
		{
			"eventType": "variable",
			"name": "STAT_drinks",
			"type": "number",
			"initialValue": "0",
			"comment": "Amount of wine drank",
			"isStatic": false,
			"isConstant": false,
			"sid": 446744930404200
		},
		{
			"eventType": "comment",
			"text": "Inactivity timers"
		},
		{
			"eventType": "variable",
			"name": "GAME_inactivity",
			"type": "number",
			"initialValue": "300",
			"comment": "Inactivity threshold for level",
			"isStatic": false,
			"isConstant": false,
			"sid": 867220464090191
		},
		{
			"eventType": "variable",
			"name": "GAME_inactivityMenu",
			"type": "number",
			"initialValue": "600",
			"comment": "Inactivity threshold for menus in level",
			"isStatic": false,
			"isConstant": false,
			"sid": 503172322822146
		},
		{
			"eventType": "include",
			"includeSheet": "Global"
		},
		{
			"eventType": "include",
			"includeSheet": "Menu"
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Level - General",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Initialization"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 584944201502871
						}
					],
					"actions": [
						{
							"callFunction": "menuSwitch",
							"sid": 956747515342781,
							"parameters": [
								"\"None\"",
								"\"none\"",
								"0"
							]
						},
						{
							"type": "comment",
							"text": "Set up camera"
						},
						{
							"id": "look-parallel-to-layout",
							"objectClass": "3DCamera",
							"sid": 701558301135250,
							"parameters": {
								"cam-x": "Player.X",
								"cam-y": "Player.Y",
								"cam-z": "Player.ZElevation+PLAYER_cameraHeight",
								"look-angle": "0"
							}
						},
						{
							"id": "rotate-camera",
							"objectClass": "3DCamera",
							"sid": 558237246404637,
							"parameters": {
								"rotate-x": "-90",
								"rotate-y": "90",
								"min-polar-angle": "90",
								"max-polar-angle": "90"
							}
						},
						{
							"type": "comment",
							"text": "Initialize HUD elements"
						},
						{
							"id": "stop-animation",
							"objectClass": "HUDArms",
							"sid": 841311970369072
						},
						{
							"id": "set-animation",
							"objectClass": "Doomguy",
							"sid": 679373932698646,
							"parameters": {
								"animation": "SETTING_playerSkin&\"Normal\"",
								"from": "beginning"
							}
						},
						{
							"id": "stop-animation",
							"objectClass": "Doomguy",
							"sid": 157725419735984
						},
						{
							"id": "set-animation-frame",
							"objectClass": "Doomguy",
							"sid": 568330619334952,
							"parameters": {
								"frame-number": "1"
							}
						},
						{
							"id": "stop-animation",
							"objectClass": "MobileArms",
							"sid": 105809159554740
						},
						{
							"id": "stop-animation",
							"objectClass": "MobileButtons",
							"sid": 997452195767957
						},
						{
							"id": "stop-animation",
							"objectClass": "Arm",
							"sid": 747517078164883
						},
						{
							"id": "stop-animation",
							"objectClass": "HUDBackground",
							"sid": 756030448321574
						},
						{
							"type": "comment",
							"text": "Set up skin"
						},
						{
							"id": "set-instvar-value",
							"objectClass": "Skin",
							"sid": 176139478644025,
							"parameters": {
								"instance-variable": "id",
								"value": "Skins.IndexOf(SETTING_playerSkin)"
							}
						},
						{
							"callFunction": "menuUpdateArrows",
							"sid": 610690962516968,
							"parameters": [
								"\"Skins\"",
								"Skin.id"
							]
						},
						{
							"type": "comment",
							"text": "Initialize player"
						},
						{
							"id": "set-position",
							"objectClass": "PlayerPickup",
							"sid": 301420309711243,
							"parameters": {
								"x": "Player.X",
								"y": "Player.Y"
							}
						},
						{
							"id": "add-child",
							"objectClass": "Player",
							"sid": 383771269393197,
							"parameters": {
								"child": "PlayerPickup",
								"transform-x": true,
								"transform-y": true,
								"transform-w": false,
								"transform-h": false,
								"transform-a": false,
								"transform-o": false,
								"transform-z-elevation": true,
								"transform-visibility": false,
								"destroy-with-parent": false
							}
						},
						{
							"id": "set-position",
							"objectClass": "PlayerSight",
							"sid": 900982824046879,
							"parameters": {
								"x": "Player.X",
								"y": "Player.Y"
							}
						},
						{
							"id": "clear-obstacles",
							"objectClass": "PlayerSight",
							"sid": 778191490816077,
							"behaviorType": "LineOfSight"
						},
						{
							"id": "add-obstacle",
							"objectClass": "PlayerSight",
							"sid": 462682059764538,
							"behaviorType": "LineOfSight",
							"parameters": {
								"obstacle": "Ground"
							}
						},
						{
							"id": "add-child",
							"objectClass": "Player",
							"sid": 811479635880357,
							"parameters": {
								"child": "PlayerSight",
								"transform-x": true,
								"transform-y": true,
								"transform-w": false,
								"transform-h": false,
								"transform-a": false,
								"transform-o": false,
								"transform-z-elevation": true,
								"transform-visibility": false,
								"destroy-with-parent": false
							}
						},
						{
							"id": "set-position",
							"objectClass": "PlayerSightSmall",
							"sid": 254882435429822,
							"parameters": {
								"x": "Player.X",
								"y": "Player.Y"
							}
						},
						{
							"id": "add-child",
							"objectClass": "Player",
							"sid": 566048183625200,
							"parameters": {
								"child": "PlayerSightSmall",
								"transform-x": true,
								"transform-y": true,
								"transform-w": false,
								"transform-h": false,
								"transform-a": false,
								"transform-o": false,
								"transform-z-elevation": true,
								"transform-visibility": false,
								"destroy-with-parent": false
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 901725911959635,
							"parameters": {
								"variable": "PLAYER_drink",
								"value": "1"
							}
						},
						{
							"type": "comment",
							"text": "Reset stats"
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 391616915154196,
							"parameters": {
								"variable": "STAT_observationsMax",
								"value": "0"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 582598574496949,
							"parameters": {
								"variable": "STAT_itemsMax",
								"value": "0"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 356834120061245,
							"parameters": {
								"variable": "STAT_time",
								"value": "0"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 505624377097745,
							"parameters": {
								"variable": "STAT_wealth",
								"value": "100"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 134548305194425,
							"parameters": {
								"variable": "STAT_cheese",
								"value": "0"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 540990048663751,
							"parameters": {
								"variable": "STAT_observations",
								"value": "0"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 140461192242845,
							"parameters": {
								"variable": "STAT_moneySpent",
								"value": "0"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 809405326660255,
							"parameters": {
								"variable": "STAT_items",
								"value": "0"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 925665194493676,
							"parameters": {
								"variable": "STAT_secrets",
								"value": "0"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 435793116668943,
							"parameters": {
								"variable": "STAT_drinks",
								"value": "0"
							}
						},
						{
							"type": "comment",
							"text": "Grand Opening"
						},
						{
							"callFunction": "unlockMedal",
							"sid": 795869699836697,
							"parameters": [
								"0",
								true
							]
						}
					],
					"sid": 288548256887656,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 909281232412652,
									"parameters": {
										"variable": "GAME_kiosk"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 372193186542061,
									"parameters": {
										"variable": "GAME_inactivity",
										"value": "30"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 315714180186418,
									"parameters": {
										"variable": "GAME_inactivityMenu",
										"value": "60"
									}
								}
							],
							"sid": 223940737059807
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 113362662290237,
									"parameters": {
										"variable": "GAME_mobile"
									}
								}
							],
							"actions": [
								{
									"id": "set-layer-visible",
									"objectClass": "System",
									"sid": 968277357183568,
									"parameters": {
										"layer": "\"Mobile\"",
										"visibility": "visible"
									}
								}
							],
							"sid": 386972187688826
						},
						{
							"eventType": "comment",
							"text": "Tally all valid objects, for calculating results"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 789808068551250,
									"parameters": {
										"object": "Trigger"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "Trigger",
									"sid": 510124710595965,
									"parameters": {
										"instance-variable": "id",
										"comparison": 5,
										"value": "0"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "Trigger",
									"sid": 595317411379864,
									"parameters": {
										"instance-variable": "type",
										"comparison": 0,
										"value": "\"shop\""
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"id": "add-to-eventvar",
									"objectClass": "System",
									"sid": 228712611719507,
									"parameters": {
										"variable": "STAT_observationsMax",
										"value": "1"
									}
								}
							],
							"sid": 550594441473918
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 121014156359449,
									"parameters": {
										"object": "Billboard"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "Billboard",
									"sid": 852340973430821,
									"parameters": {
										"instance-variable": "type",
										"comparison": 1,
										"value": "\"\""
									}
								}
							],
							"actions": [
								{
									"id": "add-to-eventvar",
									"objectClass": "System",
									"sid": 182017436136713,
									"parameters": {
										"variable": "STAT_itemsMax",
										"value": "1"
									}
								}
							],
							"sid": 303020687421730
						},
						{
							"eventType": "comment",
							"text": "Play music"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 816095755700078,
									"parameters": {
										"variable": "SETTING_doomMusic",
										"comparison": 2,
										"value": "1"
									}
								}
							],
							"actions": [
								{
									"id": "play",
									"objectClass": "Audio",
									"sid": 990116883912068,
									"parameters": {
										"audio-file": "level",
										"loop": "looping",
										"volume": "(log10(SETTING_volumeMusic)*20)",
										"stereo-pan": "0",
										"tag-optional": "\"music\""
									}
								}
							],
							"sid": 649412744256339
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 199216649252158
								}
							],
							"actions": [
								{
									"id": "play",
									"objectClass": "Audio",
									"sid": 416803101838258,
									"parameters": {
										"audio-file": "levelDoom",
										"loop": "looping",
										"volume": "(log10(SETTING_volumeMusic)*20)",
										"stereo-pan": "0",
										"tag-optional": "\"music\""
									}
								}
							],
							"sid": 690507824622458
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Tick logic; pauses during outgoing transitions"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 551661853905526,
							"parameters": {
								"variable": "TRANSITION_movedLayout"
							}
						}
					],
					"actions": [
						{
							"id": "set-image-offset-x",
							"objectClass": "Sky",
							"sid": 920478745032910,
							"parameters": {
								"offset-x": "Self.ImageOffsetX + dt*3"
							}
						},
						{
							"id": "set-image-offset-x",
							"objectClass": "Water",
							"sid": 157724782058883,
							"parameters": {
								"offset-x": "Self.ImageOffsetX + dt*2"
							}
						},
						{
							"id": "set-image-offset-y",
							"objectClass": "Water",
							"sid": 484672578172599,
							"parameters": {
								"offset-y": "Self.ImageOffsetY + dt*2"
							}
						},
						{
							"id": "set-image-offset-x",
							"objectClass": "Space",
							"sid": 505272893744209,
							"parameters": {
								"offset-x": "Self.ImageOffsetX + dt*2"
							}
						},
						{
							"id": "set-image-offset-y",
							"objectClass": "Space",
							"sid": 509949508815439,
							"parameters": {
								"offset-y": "Self.ImageOffsetY + dt*2"
							}
						},
						{
							"id": "set-angle-toward-position",
							"objectClass": "Billboard",
							"sid": 421580116413268,
							"parameters": {
								"x": "Player.X",
								"y": "Player.Y"
							}
						}
					],
					"sid": 154813525790628,
					"children": [
						{
							"eventType": "comment",
							"text": "Ingame timer"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 374189065540717,
									"parameters": {
										"variable": "SETTING_timer",
										"comparison": 5,
										"value": "1"
									}
								}
							],
							"actions": [],
							"sid": 800347943501291,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "has-tags",
											"objectClass": "PopupFont",
											"sid": 290177911877093,
											"parameters": {
												"tags": "\"timer\""
											}
										}
									],
									"actions": [
										{
											"id": "set-visible",
											"objectClass": "PopupFont",
											"sid": 798673040394245,
											"parameters": {
												"visibility": "visible"
											}
										},
										{
											"id": "set-text",
											"objectClass": "PopupFont",
											"sid": 816801580659470,
											"parameters": {
												"text": "zeropad(floor(STAT_time/3600), 2) & \":\" &\r\nzeropad(floor((STAT_time%3600)/60), 2) & \":\" &\r\nzeropad(floor(STAT_time%60), 2) & \".\" &\r\nzeropad(floor((STAT_time%1)*1000), 3)"
											}
										}
									],
									"sid": 728210573708454
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 110875690411499
								},
								{
									"id": "has-tags",
									"objectClass": "PopupFont",
									"sid": 758831128520158,
									"parameters": {
										"tags": "\"timer\""
									}
								}
							],
							"actions": [
								{
									"id": "set-visible",
									"objectClass": "PopupFont",
									"sid": 617556662357022,
									"parameters": {
										"visibility": "invisible"
									}
								}
							],
							"sid": 940543827057024
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Tick logic; pauses during ANY transitions"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 959570513371912,
							"parameters": {
								"variable": "TRANSITION_running"
							},
							"isInverted": true
						}
					],
					"actions": [],
					"sid": 824889309172963,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 433688439183487,
									"parameters": {
										"variable": "MENU_menu",
										"comparison": 0,
										"value": "\"None\""
									}
								},
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 835163211853163,
									"parameters": {
										"variable": "MENU_menu",
										"comparison": 0,
										"value": "\"Modal\""
									}
								}
							],
							"actions": [
								{
									"id": "add-to-eventvar",
									"objectClass": "System",
									"sid": 892435959443785,
									"parameters": {
										"variable": "STAT_time",
										"value": "dt"
									}
								}
							],
							"sid": 123030578221611,
							"isOrBlock": true
						},
						{
							"eventType": "group",
							"disabled": false,
							"title": "Level - HUD",
							"description": "",
							"isActiveOnStart": true,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "HUDFont",
											"sid": 419586018351748,
											"parameters": {
												"instance-variable": "type",
												"comparison": 0,
												"value": "\"health\""
											}
										}
									],
									"actions": [
										{
											"id": "set-text",
											"objectClass": "HUDFont",
											"sid": 974930283640938,
											"parameters": {
												"text": "\"$\"&STAT_wealth"
											}
										}
									],
									"sid": 993316878907481
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "HUDFont",
											"sid": 264047553239618,
											"parameters": {
												"instance-variable": "type",
												"comparison": 0,
												"value": "\"armor\""
											}
										}
									],
									"actions": [
										{
											"id": "set-text",
											"objectClass": "HUDFont",
											"sid": 865772149674088,
											"parameters": {
												"text": "STAT_cheese&\"%\""
											}
										}
									],
									"sid": 843497116531232
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "HUDFont",
											"sid": 154974758853876,
											"parameters": {
												"instance-variable": "type",
												"comparison": 0,
												"value": "\"ammo\""
											}
										}
									],
									"actions": [],
									"sid": 692358021369369,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-animation-frame",
													"objectClass": "Arm",
													"sid": 367375167638808,
													"parameters": {
														"comparison": 0,
														"number": "0"
													}
												}
											],
											"actions": [
												{
													"id": "set-text",
													"objectClass": "HUDFont",
													"sid": 899866968946452,
													"parameters": {
														"text": "\"\""
													}
												}
											],
											"sid": 542067141040698
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-animation-frame",
													"objectClass": "Arm",
													"sid": 360461444300651,
													"parameters": {
														"comparison": 0,
														"number": "1"
													}
												}
											],
											"actions": [
												{
													"id": "set-text",
													"objectClass": "HUDFont",
													"sid": 913078646053291,
													"parameters": {
														"text": "Drinks.At(Drinks.IndexOf(\"wine\"), 1)"
													}
												}
											],
											"sid": 393529633662524
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-animation-frame",
													"objectClass": "Arm",
													"sid": 165173514131375,
													"parameters": {
														"comparison": 0,
														"number": "2"
													}
												}
											],
											"actions": [
												{
													"id": "set-text",
													"objectClass": "HUDFont",
													"sid": 418546314762246,
													"parameters": {
														"text": "Drinks.At(Drinks.IndexOf(\"beer\"), 1)"
													}
												}
											],
											"sid": 881189386469880
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "HUDAmmo",
											"sid": 157872952311641,
											"parameters": {
												"instance-variable": "type",
												"comparison": 0,
												"value": "\"wine\""
											}
										}
									],
									"actions": [
										{
											"id": "set-text",
											"objectClass": "HUDAmmo",
											"sid": 322945239819164,
											"parameters": {
												"text": "Drinks.At(Drinks.IndexOf(\"wine\"), 1)"
											}
										}
									],
									"sid": 752004934995534
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "HUDAmmo",
											"sid": 497561107105639,
											"parameters": {
												"instance-variable": "type",
												"comparison": 0,
												"value": "\"beer\""
											}
										}
									],
									"actions": [
										{
											"id": "set-text",
											"objectClass": "HUDAmmo",
											"sid": 821640608614156,
											"parameters": {
												"text": "Drinks.At(Drinks.IndexOf(\"beer\"), 1)"
											}
										}
									],
									"sid": 715798355177968
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-at-xy",
											"objectClass": "Drinks",
											"sid": 229019319475025,
											"parameters": {
												"x": "Drinks.IndexOf(\"beer\")",
												"y": "2",
												"comparison": 0,
												"value": "\"true\""
											}
										}
									],
									"actions": [
										{
											"id": "set-animation-frame",
											"objectClass": "HUDArms",
											"sid": 342858324627382,
											"parameters": {
												"frame-number": "1"
											}
										}
									],
									"sid": 128701895285338
								},
								{
									"eventType": "comment",
									"text": "Highlighting mobile buttons when touched"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "every-tick",
											"objectClass": "System",
											"sid": 947498267115742
										}
									],
									"actions": [
										{
											"id": "set-opacity",
											"objectClass": "MobileButtons",
											"sid": 147093622201146,
											"parameters": {
												"opacity": "50"
											}
										},
										{
											"id": "set-effect-parameter",
											"objectClass": "MobileArms",
											"sid": 793425367601214,
											"parameters": {
												"effect": "\"Brightness\"",
												"parameter-index": "0",
												"value": "100"
											}
										}
									],
									"sid": 900484407087245
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 102628664717877,
											"parameters": {
												"variable": "MENU_menu",
												"comparison": 0,
												"value": "\"None\""
											}
										}
									],
									"actions": [],
									"sid": 380038407444290,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-touching-object",
													"objectClass": "Touch",
													"sid": 542892683815432,
													"parameters": {
														"object": "MobileButtons"
													}
												}
											],
											"actions": [
												{
													"id": "set-opacity",
													"objectClass": "MobileButtons",
													"sid": 282816069204904,
													"parameters": {
														"opacity": "75"
													}
												}
											],
											"sid": 271160510731277
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-touching-object",
													"objectClass": "Touch",
													"sid": 641551486976064,
													"parameters": {
														"object": "MobileArms"
													}
												}
											],
											"actions": [
												{
													"id": "set-effect-parameter",
													"objectClass": "MobileArms",
													"sid": 445767990711239,
													"parameters": {
														"effect": "\"Brightness\"",
														"parameter-index": "0",
														"value": "120"
													}
												}
											],
											"sid": 637267839623438
										}
									]
								}
							],
							"sid": 511336787952179
						},
						{
							"eventType": "comment",
							"text": "Our little friend likes to look around"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-timer-running",
									"objectClass": "Doomguy",
									"sid": 650240642357975,
									"behaviorType": "Timer",
									"parameters": {
										"tag": "\"override\""
									},
									"isInverted": true
								}
							],
							"actions": [],
							"sid": 861304422812770,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "every-x-seconds",
											"objectClass": "System",
											"sid": 473492848542535,
											"parameters": {
												"interval-seconds": "random(0.25, 2)"
											}
										}
									],
									"actions": [
										{
											"id": "set-animation",
											"objectClass": "Doomguy",
											"sid": 318487075831217,
											"parameters": {
												"animation": "SETTING_playerSkin&\"Normal\"",
												"from": "beginning"
											}
										},
										{
											"id": "stop-animation",
											"objectClass": "Doomguy",
											"sid": 488417712366992
										},
										{
											"id": "set-animation-frame",
											"objectClass": "Doomguy",
											"sid": 945996599523256,
											"parameters": {
												"frame-number": "round(random(0, 2))"
											}
										}
									],
									"sid": 623104953071676
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Inactivity timer"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-timer-running",
									"objectClass": "Doomguy",
									"sid": 145691458581413,
									"behaviorType": "Timer",
									"parameters": {
										"tag": "\"inactivity\""
									},
									"isInverted": true
								}
							],
							"actions": [],
							"sid": 986314588083081,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 654638563999259,
											"parameters": {
												"variable": "MENU_menu",
												"comparison": 0,
												"value": "\"None\""
											}
										}
									],
									"actions": [
										{
											"id": "start-timer",
											"objectClass": "Doomguy",
											"sid": 351867126631190,
											"behaviorType": "Timer",
											"parameters": {
												"duration": "GAME_inactivity",
												"type": "once",
												"tag": "\"inactivity\""
											}
										}
									],
									"sid": 825382146375825
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 105468454990229
										}
									],
									"actions": [
										{
											"id": "start-timer",
											"objectClass": "Doomguy",
											"sid": 437623877570243,
											"behaviorType": "Timer",
											"parameters": {
												"duration": "GAME_inactivityMenu",
												"type": "once",
												"tag": "\"inactivity\""
											}
										}
									],
									"sid": 751074934289510
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 966060219335409,
									"parameters": {
										"first-value": "Doomguy.Timer.CurrentTime(\"inactivity\")",
										"comparison": 5,
										"second-value": "Doomguy.Timer.Duration(\"inactivity\")/2"
									}
								}
							],
							"actions": [
								{
									"id": "set-animation",
									"objectClass": "Doomguy",
									"sid": 898189407286203,
									"parameters": {
										"animation": "SETTING_playerSkin&\"Sleep\"",
										"from": "beginning"
									}
								}
							],
							"sid": 744464619068551
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-signal",
									"objectClass": "System",
									"sid": 994422557629349,
									"parameters": {
										"tag": "\"inputMouse\""
									}
								},
								{
									"id": "on-signal",
									"objectClass": "System",
									"sid": 275395777655128,
									"parameters": {
										"tag": "\"inputKeyboard\""
									}
								},
								{
									"id": "on-signal",
									"objectClass": "System",
									"sid": 655078413326613,
									"parameters": {
										"tag": "\"inputGamepad\""
									}
								},
								{
									"id": "on-signal",
									"objectClass": "System",
									"sid": 463100054348876,
									"parameters": {
										"tag": "\"inputTouch\""
									}
								},
								{
									"id": "on-signal",
									"objectClass": "System",
									"sid": 887618313326217,
									"parameters": {
										"tag": "\"inputMixed\""
									}
								}
							],
							"actions": [
								{
									"id": "stop-timer",
									"objectClass": "Doomguy",
									"sid": 314639423066549,
									"behaviorType": "Timer",
									"parameters": {
										"tag": "\"inactivity\""
									}
								}
							],
							"sid": 639764232389987,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-animation-playing",
											"objectClass": "Doomguy",
											"sid": 597308552779320,
											"parameters": {
												"animation": "SETTING_playerSkin&\"Sleep\""
											}
										}
									],
									"actions": [
										{
											"id": "play-by-name",
											"objectClass": "Audio",
											"sid": 242398497040862,
											"parameters": {
												"folder": "sounds",
												"audio-file-name": "SETTING_playerSound&\"Grunt\"",
												"loop": "not-looping",
												"volume": "log10(SETTING_volumeSound)*20",
												"stereo-pan": "0",
												"tag-optional": "\"grunt\""
											}
										},
										{
											"id": "set-playback-rate",
											"objectClass": "Audio",
											"sid": 351391158171424,
											"parameters": {
												"tag": "\"grunt\"",
												"playback-rate": "random(0.95, 1.05)"
											}
										},
										{
											"id": "set-animation",
											"objectClass": "Doomguy",
											"sid": 336178609642435,
											"parameters": {
												"animation": "SETTING_playerSkin&\"Normal\"",
												"from": "beginning"
											}
										},
										{
											"id": "stop-animation",
											"objectClass": "Doomguy",
											"sid": 753452904331542
										},
										{
											"id": "set-animation-frame",
											"objectClass": "Doomguy",
											"sid": 567404856381929,
											"parameters": {
												"frame-number": "1"
											}
										}
									],
									"sid": 225767539230213
								}
							],
							"isOrBlock": true
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-timer",
									"objectClass": "Doomguy",
									"sid": 559719175593053,
									"behaviorType": "Timer",
									"parameters": {
										"tag": "\"inactivity\""
									}
								}
							],
							"actions": [
								{
									"id": "stop-all",
									"objectClass": "Audio",
									"sid": 145159116250947
								},
								{
									"id": "release-pointer-lock",
									"objectClass": "Mouse",
									"sid": 347847102450881
								},
								{
									"callFunction": "transition",
									"sid": 443864421524983,
									"parameters": [
										"\"Title\""
									]
								}
							],
							"sid": 736352623787209
						}
					]
				}
			],
			"sid": 213568456480131
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Level - Drinks",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "group",
					"disabled": false,
					"title": "Level - Drinks (Selection)",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "Swap drinks; make sure no animations are playing first"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 227448478565802,
									"parameters": {
										"variable": "TRANSITION_running"
									},
									"isInverted": true
								},
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 310812168806105,
									"parameters": {
										"variable": "MENU_menu",
										"comparison": 0,
										"value": "\"None\""
									}
								},
								{
									"id": "is-playing-by-tags",
									"objectClass": "TimelineController",
									"sid": 529034264813128,
									"parameters": {
										"tags": "\"swap\""
									},
									"isInverted": true
								},
								{
									"id": "is-playing-by-tags",
									"objectClass": "TimelineController",
									"sid": 729794769984971,
									"parameters": {
										"tags": "\"drink\""
									},
									"isInverted": true
								}
							],
							"actions": [],
							"sid": 841339958555275,
							"children": [
								{
									"eventType": "comment",
									"text": "Select drink directly"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "on-key-pressed",
											"objectClass": "Keyboard",
											"sid": 856657560027632,
											"parameters": {
												"key": 49
											}
										}
									],
									"actions": [
										{
											"callFunction": "selectDrink",
											"sid": 708883969976419,
											"parameters": [
												"\"direct\"",
												"\"hand\""
											]
										}
									],
									"sid": 741063500526328
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "on-key-pressed",
											"objectClass": "Keyboard",
											"sid": 560147291798125,
											"parameters": {
												"key": 50
											}
										}
									],
									"actions": [
										{
											"callFunction": "selectDrink",
											"sid": 927318255865011,
											"parameters": [
												"\"direct\"",
												"\"wine\""
											]
										}
									],
									"sid": 650517165991145
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "on-key-pressed",
											"objectClass": "Keyboard",
											"sid": 735255992581033,
											"parameters": {
												"key": 51
											}
										}
									],
									"actions": [
										{
											"callFunction": "selectDrink",
											"sid": 981109373245469,
											"parameters": [
												"\"direct\"",
												"\"beer\""
											]
										}
									],
									"sid": 911480417218987
								},
								{
									"eventType": "comment",
									"text": "Cycle drink left"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "on-button-pressed",
											"objectClass": "Gamepad",
											"sid": 762539044992919,
											"parameters": {
												"gamepad": "0",
												"button": "left-shoulder-button"
											}
										}
									],
									"actions": [
										{
											"callFunction": "selectDrink",
											"sid": 649742054186362,
											"parameters": [
												"\"left\"",
												"\"none\""
											]
										}
									],
									"sid": 388657930555519
								},
								{
									"eventType": "comment",
									"text": "Cycle drink right"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "on-button-pressed",
											"objectClass": "Gamepad",
											"sid": 126019983982076,
											"parameters": {
												"gamepad": "0",
												"button": "right-shoulder-button"
											}
										}
									],
									"actions": [
										{
											"callFunction": "selectDrink",
											"sid": 375695695879308,
											"parameters": [
												"\"right\"",
												"\"none\""
											]
										}
									],
									"sid": 827881349996493
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "on-any-touch-start",
											"objectClass": "Touch",
											"sid": 668690709096349
										},
										{
											"id": "is-touching-object",
											"objectClass": "Touch",
											"sid": 658380390434232,
											"parameters": {
												"object": "MobileArms"
											}
										}
									],
									"actions": [
										{
											"callFunction": "selectDrink",
											"sid": 641652873407879,
											"parameters": [
												"\"right\"",
												"\"none\""
											]
										}
									],
									"sid": 346468461410772
								}
							]
						},
						{
							"eventType": "variable",
							"name": "index",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 165922920826234
						},
						{
							"eventType": "comment",
							"text": "Select the desired valid drink"
						},
						{
							"functionName": "selectDrink",
							"functionDescription": "Select the desired valid drink",
							"functionCategory": "",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "direction",
									"type": "string",
									"initialValue": "right",
									"comment": "",
									"sid": 165304060585500
								},
								{
									"name": "drink",
									"type": "string",
									"initialValue": "none",
									"comment": "",
									"sid": 925092432404371
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [],
							"sid": 400704130186567,
							"children": [
								{
									"eventType": "comment",
									"text": "Cycle left or right to the next valid drink"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 216700188553444,
											"parameters": {
												"variable": "direction",
												"comparison": 0,
												"value": "\"direct\""
											},
											"isInverted": true
										}
									],
									"actions": [
										{
											"id": "play-timeline",
											"objectClass": "TimelineController",
											"sid": 766349094652577,
											"parameters": {
												"timeline": "Swap",
												"tags": "\"swap\""
											}
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 291561100934469,
											"parameters": {
												"variable": "index",
												"value": "PLAYER_drink"
											}
										}
									],
									"sid": 914210575196184,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "for",
													"objectClass": "System",
													"sid": 437820458534232,
													"parameters": {
														"name": "\"drinks\"",
														"start-index": "0",
														"end-index": "Drinks.Width-1"
													}
												}
											],
											"actions": [
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 181319628696852,
													"parameters": {
														"variable": "index",
														"value": "((index+(direction = \"right\" ? 1 : -1))+Drinks.Width)%Drinks.Width"
													}
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 390223779402068,
													"parameters": {
														"variable": "PLAYER_drink",
														"value": "index"
													}
												}
											],
											"sid": 548468690636312,
											"children": [
												{
													"eventType": "comment",
													"text": "We found a valid drink, stop the loop"
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-at-xy",
															"objectClass": "Drinks",
															"sid": 225826563705479,
															"parameters": {
																"x": "index",
																"y": "1",
																"comparison": 0,
																"value": "0"
															},
															"isInverted": true
														},
														{
															"id": "compare-at-xy",
															"objectClass": "Drinks",
															"sid": 260514940420161,
															"parameters": {
																"x": "index",
																"y": "2",
																"comparison": 0,
																"value": "\"false\""
															},
															"isInverted": true
														}
													],
													"actions": [
														{
															"id": "stop-loop",
															"objectClass": "System",
															"sid": 990569307859612
														}
													],
													"sid": 575774590386299
												}
											]
										}
									]
								},
								{
									"eventType": "comment",
									"text": "Choose drink directly, if valid and not current"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 238217594907761
										}
									],
									"actions": [],
									"sid": 524556085141530,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-eventvar",
													"objectClass": "System",
													"sid": 217955734188957,
													"parameters": {
														"variable": "PLAYER_drink",
														"comparison": 0,
														"value": "Drinks.IndexOf(drink)"
													},
													"isInverted": true
												},
												{
													"id": "compare-at-xy",
													"objectClass": "Drinks",
													"sid": 267901020459354,
													"parameters": {
														"x": "Drinks.IndexOf(drink)",
														"y": "1",
														"comparison": 0,
														"value": "0"
													},
													"isInverted": true
												},
												{
													"id": "compare-at-xy",
													"objectClass": "Drinks",
													"sid": 251883110422544,
													"parameters": {
														"x": "Drinks.IndexOf(drink)",
														"y": "2",
														"comparison": 0,
														"value": "\"false\""
													},
													"isInverted": true
												}
											],
											"actions": [
												{
													"id": "play-timeline",
													"objectClass": "TimelineController",
													"sid": 998810384288647,
													"parameters": {
														"timeline": "Swap",
														"tags": "\"swap\""
													}
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 419951213372871,
													"parameters": {
														"variable": "PLAYER_drink",
														"value": "Drinks.IndexOf(drink)"
													}
												}
											],
											"sid": 482963543016751
										}
									]
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-keyframe-reached",
									"objectClass": "TimelineController",
									"sid": 460003724765775,
									"parameters": {
										"tags": "\"swap\"",
										"match": "any-tags"
									}
								}
							],
							"actions": [
								{
									"id": "set-animation-frame",
									"objectClass": "Arm",
									"sid": 623320983046949,
									"parameters": {
										"frame-number": "PLAYER_drink"
									}
								},
								{
									"id": "set-animation-frame",
									"objectClass": "MobileArms",
									"sid": 225736231632630,
									"parameters": {
										"frame-number": "PLAYER_drink"
									}
								}
							],
							"sid": 491449479266240
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-keyframe-reached",
									"objectClass": "TimelineController",
									"sid": 393403346879191,
									"parameters": {
										"tags": "\"drink\"",
										"match": "any-tags"
									}
								},
								{
									"id": "compare-at-xy",
									"objectClass": "Drinks",
									"sid": 964757854755982,
									"parameters": {
										"x": "PLAYER_drink",
										"y": "1",
										"comparison": 0,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"callFunction": "selectDrink",
									"sid": 841507538393787,
									"parameters": [
										"\"left\"",
										"\"none\""
									]
								}
							],
							"sid": 130608740902534
						}
					],
					"sid": 469163705892176
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "Level - Drinks (Drinking)",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "Take a drink"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-click",
									"objectClass": "Mouse",
									"sid": 342379052860874,
									"parameters": {
										"mouse-button": "left",
										"click-type": "clicked"
									}
								},
								{
									"id": "has-pointer-lock",
									"objectClass": "Mouse",
									"sid": 125976531149721
								}
							],
							"actions": [
								{
									"callFunction": "drink",
									"sid": 438321194293261
								}
							],
							"sid": 199480255633583
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-key-pressed",
									"objectClass": "Keyboard",
									"sid": 499578179922735,
									"parameters": {
										"key": 16
									}
								},
								{
									"id": "on-button-pressed",
									"objectClass": "Gamepad",
									"sid": 678090000683218,
									"parameters": {
										"gamepad": "0",
										"button": "right-shoulder-trigger"
									}
								},
								{
									"id": "on-button-pressed",
									"objectClass": "Gamepad",
									"sid": 597137528680340,
									"parameters": {
										"gamepad": "0",
										"button": "button-x"
									}
								}
							],
							"actions": [
								{
									"callFunction": "drink",
									"sid": 577636301433338
								}
							],
							"sid": 517470951971430,
							"isOrBlock": true
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-any-touch-start",
									"objectClass": "Touch",
									"sid": 768545424964565
								},
								{
									"id": "is-touching-object",
									"objectClass": "Touch",
									"sid": 805874214014462,
									"parameters": {
										"object": "MobileButtons"
									}
								},
								{
									"id": "compare-animation-frame",
									"objectClass": "MobileButtons",
									"sid": 837073407623512,
									"parameters": {
										"comparison": 0,
										"number": "5"
									}
								}
							],
							"actions": [
								{
									"callFunction": "drink",
									"sid": 885860368357874
								}
							],
							"sid": 747746281971384
						},
						{
							"functionName": "drink",
							"functionDescription": "Drink the currently selected drink",
							"functionCategory": "",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [],
							"eventType": "function-block",
							"conditions": [
								{
									"id": "is-playing-by-tags",
									"objectClass": "TimelineController",
									"sid": 993450888173817,
									"parameters": {
										"tags": "\"swap\""
									},
									"isInverted": true
								},
								{
									"id": "is-playing-by-tags",
									"objectClass": "TimelineController",
									"sid": 538857275584125,
									"parameters": {
										"tags": "\"drink\""
									},
									"isInverted": true
								}
							],
							"actions": [],
							"sid": 983980055787558,
							"children": [
								{
									"eventType": "comment",
									"text": "Hand"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-animation-frame",
											"objectClass": "Arm",
											"sid": 283543902688372,
											"parameters": {
												"comparison": 0,
												"number": "0"
											}
										}
									],
									"actions": [
										{
											"id": "play-timeline",
											"objectClass": "TimelineController",
											"sid": 514916611258391,
											"parameters": {
												"timeline": "Reach",
												"tags": "\"drink\""
											}
										}
									],
									"sid": 419413846392581
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-tag-playing",
											"objectClass": "Audio",
											"sid": 563055585121146,
											"parameters": {
												"tag": "\"sip\""
											},
											"isInverted": true
										}
									],
									"actions": [],
									"sid": 539245295760732,
									"children": [
										{
											"eventType": "comment",
											"text": "Wine"
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-animation-frame",
													"objectClass": "Arm",
													"sid": 222779174263679,
													"parameters": {
														"comparison": 0,
														"number": "1"
													}
												}
											],
											"actions": [],
											"sid": 256130163860889,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-at-xy",
															"objectClass": "Drinks",
															"sid": 865447223112696,
															"parameters": {
																"x": "Self.IndexOf(\"wine\")",
																"y": "1",
																"comparison": 4,
																"value": "0"
															}
														}
													],
													"actions": [
														{
															"id": "play-timeline",
															"objectClass": "TimelineController",
															"sid": 795301058919849,
															"parameters": {
																"timeline": "Drink",
																"tags": "\"drink\""
															}
														},
														{
															"id": "play-by-name",
															"objectClass": "Audio",
															"sid": 563107467281042,
															"parameters": {
																"folder": "sounds",
																"audio-file-name": "SETTING_playerSound&\"Wine\"",
																"loop": "not-looping",
																"volume": "log10(SETTING_volumeSound)*20",
																"stereo-pan": "0",
																"tag-optional": "\"sip\""
															}
														},
														{
															"callFunction": "addDrinks",
															"sid": 497843510844586,
															"parameters": [
																"\"wine\"",
																"-1"
															]
														},
														{
															"id": "add-to-eventvar",
															"objectClass": "System",
															"sid": 324101987863589,
															"parameters": {
																"variable": "STAT_drinks",
																"value": "1"
															}
														}
													],
													"sid": 670020978769039
												}
											]
										},
										{
											"eventType": "comment",
											"text": "Beer"
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-animation-frame",
													"objectClass": "Arm",
													"sid": 981905825035328,
													"parameters": {
														"comparison": 0,
														"number": "2"
													}
												}
											],
											"actions": [],
											"sid": 221881130066726,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-at-xy",
															"objectClass": "Drinks",
															"sid": 970906279845419,
															"parameters": {
																"x": "Self.IndexOf(\"beer\")",
																"y": "1",
																"comparison": 4,
																"value": "0"
															}
														}
													],
													"actions": [
														{
															"id": "play-timeline",
															"objectClass": "TimelineController",
															"sid": 168639160573126,
															"parameters": {
																"timeline": "Drink",
																"tags": "\"drink\""
															}
														},
														{
															"callFunction": "addDrinks",
															"sid": 609668416484701,
															"parameters": [
																"\"beer\"",
																"-1"
															]
														},
														{
															"id": "play-by-name",
															"objectClass": "Audio",
															"sid": 483132433896127,
															"parameters": {
																"folder": "sounds",
																"audio-file-name": "SETTING_playerSound&\"Beer\"",
																"loop": "not-looping",
																"volume": "log10(SETTING_volumeSound)*20",
																"stereo-pan": "0",
																"tag-optional": "\"sip\""
															}
														}
													],
													"sid": 512796848189870
												}
											]
										}
									]
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Reaching counts as interacting, because it's funny"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-keyframe-reached",
									"objectClass": "TimelineController",
									"sid": 631526395680303,
									"parameters": {
										"tags": "\"reach\"",
										"match": "any-tags"
									}
								}
							],
							"actions": [
								{
									"callFunction": "interact",
									"sid": 303406744085092
								}
							],
							"sid": 962450747535299
						},
						{
							"eventType": "comment",
							"text": "Sociable"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-keyframe-reached",
									"objectClass": "TimelineController",
									"sid": 299573291890107,
									"parameters": {
										"tags": "\"drink\"",
										"match": "any-tags"
									}
								},
								{
									"id": "compare-at-xy",
									"objectClass": "Medals",
									"sid": 476212195840999,
									"parameters": {
										"x": "6",
										"y": "5",
										"comparison": 1,
										"value": "1"
									}
								},
								{
									"id": "is-overlapping-another-object",
									"objectClass": "PlayerSight",
									"sid": 722916173568280,
									"parameters": {
										"object": "Trigger"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "Trigger",
									"sid": 620556713304632,
									"parameters": {
										"instance-variable": "id",
										"comparison": 0,
										"value": "-98"
									}
								}
							],
							"actions": [
								{
									"id": "destroy",
									"objectClass": "Trigger",
									"sid": 891080809457049
								},
								{
									"callFunction": "unlockMedal",
									"sid": 263261376332863,
									"parameters": [
										"6",
										true
									]
								},
								{
									"id": "play",
									"objectClass": "Audio",
									"sid": 662522784479694,
									"parameters": {
										"audio-file": "ding",
										"loop": "not-looping",
										"volume": "log10(SETTING_volumeSound)*20",
										"stereo-pan": "0",
										"tag-optional": "\"\""
									}
								},
								{
									"id": "set-animation",
									"objectClass": "GALAKTOR",
									"sid": 132685998998401,
									"parameters": {
										"animation": "\"wink\"",
										"from": "beginning"
									}
								},
								{
									"id": "wait",
									"objectClass": "System",
									"sid": 461632586716795,
									"parameters": {
										"seconds": "0.5",
										"use-timescale": true
									}
								},
								{
									"id": "set-animation",
									"objectClass": "GALAKTOR",
									"sid": 367066611411284,
									"parameters": {
										"animation": "\"default\"",
										"from": "beginning"
									}
								}
							],
							"sid": 630979578000133
						}
					],
					"sid": 225343094789614
				},
				{
					"eventType": "comment",
					"text": "Helper function to add (or subtract) amount of drinks"
				},
				{
					"functionName": "addDrinks",
					"functionDescription": "Add (or subtract) amount of drinks",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "type",
							"type": "string",
							"initialValue": "wine",
							"comment": "",
							"sid": 571516521850342
						},
						{
							"name": "amount",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 464752005333028
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-at-xy",
							"objectClass": "Drinks",
							"sid": 955895282367277,
							"parameters": {
								"x": "Self.IndexOf(type)",
								"y": "1",
								"value": "Self.At(Self.IndexOf(type), 1)+amount"
							}
						}
					],
					"sid": 341477702100194
				}
			],
			"sid": 890356797290954
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Level - Interaction",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-timer-running",
							"objectClass": "Selector",
							"sid": 297718369865232,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"switch\""
							},
							"isInverted": true
						}
					],
					"actions": [],
					"sid": 202099529294333,
					"children": [
						{
							"eventType": "comment",
							"text": "Interaction inputs"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-click",
									"objectClass": "Mouse",
									"sid": 597439115593022,
									"parameters": {
										"mouse-button": "right",
										"click-type": "clicked"
									}
								},
								{
									"id": "on-key-pressed",
									"objectClass": "Keyboard",
									"sid": 309683534385216,
									"parameters": {
										"key": 32
									}
								},
								{
									"id": "on-button-pressed",
									"objectClass": "Gamepad",
									"sid": 639760953648702,
									"parameters": {
										"gamepad": "0",
										"button": "button-a"
									}
								}
							],
							"actions": [
								{
									"callFunction": "interact",
									"sid": 450808007458585
								}
							],
							"sid": 953524965927007,
							"isOrBlock": true
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-any-touch-start",
									"objectClass": "Touch",
									"sid": 131478726773462
								},
								{
									"id": "is-touching-object",
									"objectClass": "Touch",
									"sid": 635748529266150,
									"parameters": {
										"object": "MobileButtons"
									}
								},
								{
									"id": "compare-animation-frame",
									"objectClass": "MobileButtons",
									"sid": 985038704929434,
									"parameters": {
										"comparison": 0,
										"number": "4"
									}
								}
							],
							"actions": [
								{
									"callFunction": "interact",
									"sid": 135634518268561
								}
							],
							"sid": 935612437031172
						}
					]
				},
				{
					"functionName": "interact",
					"functionDescription": "Interact with something in the player's line of sight",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 274624799089342,
							"parameters": {
								"variable": "MENU_menu",
								"comparison": 0,
								"value": "\"None\""
							}
						},
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 195190439589465,
							"parameters": {
								"variable": "TRANSITION_running"
							},
							"isInverted": true
						}
					],
					"actions": [],
					"sid": 493747897584817,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-overlapping-another-object",
									"objectClass": "PlayerSight",
									"sid": 516674047962870,
									"parameters": {
										"object": "Ground"
									}
								}
							],
							"actions": [],
							"sid": 892941975984991,
							"children": [
								{
									"eventType": "comment",
									"text": "Open a door"
								},
								{
									"eventType": "variable",
									"name": "doorID",
									"type": "string",
									"initialValue": "door0",
									"comment": "",
									"isStatic": false,
									"isConstant": false,
									"sid": 703050502913795
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-on-layer",
											"objectClass": "Ground",
											"sid": 317528967915425,
											"parameters": {
												"layer": "\"Doors\""
											}
										},
										{
											"id": "has-tags",
											"objectClass": "Ground",
											"sid": 486671731372852,
											"parameters": {
												"tags": "\"open\""
											},
											"isInverted": true
										}
									],
									"actions": [
										{
											"id": "play",
											"objectClass": "Audio",
											"sid": 684270228243005,
											"parameters": {
												"audio-file": "door",
												"loop": "not-looping",
												"volume": "log10(SETTING_volumeSound)*20",
												"stereo-pan": "0",
												"tag-optional": "\"\""
											}
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 181283204234795,
											"parameters": {
												"variable": "doorID",
												"value": "Ground.Tags"
											}
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 245319908179054,
											"parameters": {
												"variable": "doorID",
												"value": "Ground.TagAt(0)"
											}
										}
									],
									"sid": 364562239057752,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-all",
													"objectClass": "System",
													"sid": 541576678805611,
													"parameters": {
														"object": "Ground"
													}
												},
												{
													"id": "has-tags",
													"objectClass": "Ground",
													"sid": 705629571984981,
													"parameters": {
														"tags": "doorID"
													}
												}
											],
											"actions": [
												{
													"id": "set-instance",
													"objectClass": "TimelineController",
													"sid": 648521475929763,
													"parameters": {
														"object-class": "Ground",
														"track-id": "\"door\""
													}
												},
												{
													"id": "play-timeline",
													"objectClass": "TimelineController",
													"sid": 975678838076094,
													"parameters": {
														"timeline": "Door",
														"tags": "\"door\""
													}
												},
												{
													"id": "change-tags",
													"objectClass": "Ground",
													"sid": 670640740369340,
													"parameters": {
														"action": "add",
														"tags": "\"open\""
													}
												}
											],
											"sid": 263230209461412
										}
									]
								},
								{
									"eventType": "comment",
									"text": "Finish the level"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 790653428836573
										},
										{
											"id": "is-overlapping-another-object",
											"objectClass": "PlayerSight",
											"sid": 653045968231486,
											"parameters": {
												"object": "Overlay"
											}
										},
										{
											"id": "has-tags",
											"objectClass": "Overlay",
											"sid": 344273921505145,
											"parameters": {
												"tags": "\"exit\""
											}
										}
									],
									"actions": [
										{
											"id": "stop-all",
											"objectClass": "Audio",
											"sid": 482175557186232
										},
										{
											"id": "play",
											"objectClass": "Audio",
											"sid": 998974927435266,
											"parameters": {
												"audio-file": "menuOpen",
												"loop": "not-looping",
												"volume": "log10(SETTING_volumeSound)*20",
												"stereo-pan": "0",
												"tag-optional": "\"\""
											}
										},
										{
											"id": "set-animation",
											"objectClass": "Switch",
											"sid": 589269608920524,
											"parameters": {
												"animation": "\"on\"",
												"from": "beginning"
											}
										},
										{
											"id": "set-active",
											"objectClass": "Arm",
											"sid": 629334771431125,
											"behaviorType": "Horizontal",
											"parameters": {
												"state": "inactive"
											}
										},
										{
											"id": "set-active",
											"objectClass": "Arm",
											"sid": 903147202204842,
											"behaviorType": "Vertical",
											"parameters": {
												"state": "inactive"
											}
										},
										{
											"id": "set-active",
											"objectClass": "Arm",
											"sid": 129158153295747,
											"behaviorType": "Bob",
											"parameters": {
												"state": "inactive"
											}
										},
										{
											"id": "release-pointer-lock",
											"objectClass": "Mouse",
											"sid": 554756761957731
										},
										{
											"callFunction": "transition",
											"sid": 835107228814608,
											"parameters": [
												"\"Results\""
											]
										}
									],
									"sid": 767065793703173
								},
								{
									"eventType": "comment",
									"text": "Found a valid trigger that isn't through a wall"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 862870891532358
										},
										{
											"id": "is-overlapping-another-object",
											"objectClass": "PlayerSight",
											"sid": 326021948061927,
											"parameters": {
												"object": "Trigger"
											}
										},
										{
											"id": "compare-instance-variable",
											"objectClass": "Trigger",
											"sid": 357708527853541,
											"parameters": {
												"instance-variable": "id",
												"comparison": 4,
												"value": "-99"
											}
										},
										{
											"id": "has-los-to-object",
											"objectClass": "PlayerSight",
											"sid": 155035695117551,
											"behaviorType": "LineOfSight",
											"parameters": {
												"object": "Trigger",
												"image-point": "1"
											}
										}
									],
									"actions": [
										{
											"callFunction": "trigger",
											"sid": 639858277090934,
											"parameters": [
												"Trigger.UID"
											]
										}
									],
									"sid": 910852418844473
								},
								{
									"eventType": "comment",
									"text": "Found a valid trigger that ignores line of sight checks"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 553195433720252
										},
										{
											"id": "is-overlapping-another-object",
											"objectClass": "PlayerSight",
											"sid": 731773100600678,
											"parameters": {
												"object": "Trigger"
											}
										},
										{
											"id": "compare-instance-variable",
											"objectClass": "Trigger",
											"sid": 940663450321403,
											"parameters": {
												"instance-variable": "id",
												"comparison": 4,
												"value": "-99"
											}
										},
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "Trigger",
											"sid": 637409983487556,
											"parameters": {
												"instance-variable": "skipSightCheck"
											}
										}
									],
									"actions": [
										{
											"callFunction": "trigger",
											"sid": 456046258417407,
											"parameters": [
												"Trigger.UID"
											]
										}
									],
									"sid": 909486921632317
								},
								{
									"eventType": "comment",
									"text": "Bump into a wall"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 875064179275726
										},
										{
											"id": "is-overlapping-another-object",
											"objectClass": "PlayerSightSmall",
											"sid": 454225090605614,
											"parameters": {
												"object": "Ground"
											}
										},
										{
											"id": "is-on-layer",
											"objectClass": "Ground",
											"sid": 803150097815952,
											"parameters": {
												"layer": "\"Doors\""
											},
											"isInverted": true
										},
										{
											"id": "is-enabled",
											"objectClass": "Ground",
											"sid": 250593215357243,
											"behaviorType": "Solid"
										},
										{
											"id": "is-timer-running",
											"objectClass": "Doomguy",
											"sid": 409433485410259,
											"behaviorType": "Timer",
											"parameters": {
												"tag": "\"grunt\""
											},
											"isInverted": true
										}
									],
									"actions": [
										{
											"id": "start-timer",
											"objectClass": "Doomguy",
											"sid": 550334537253905,
											"behaviorType": "Timer",
											"parameters": {
												"duration": "0.15",
												"type": "once",
												"tag": "\"grunt\""
											}
										},
										{
											"id": "play-by-name",
											"objectClass": "Audio",
											"sid": 719561030099684,
											"parameters": {
												"folder": "sounds",
												"audio-file-name": "SETTING_playerSound&\"Grunt\"",
												"loop": "not-looping",
												"volume": "log10(SETTING_volumeSound)*20",
												"stereo-pan": "0",
												"tag-optional": "\"grunt\""
											}
										},
										{
											"id": "set-playback-rate",
											"objectClass": "Audio",
											"sid": 776475393901961,
											"parameters": {
												"tag": "\"grunt\"",
												"playback-rate": "random(0.95, 1.05)"
											}
										}
									],
									"sid": 378115500961093
								}
							]
						}
					]
				},
				{
					"functionName": "trigger",
					"functionDescription": "Trigger something based on trigger ID",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "uid",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 162532811792095
						}
					],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "pick-by-unique-id",
							"objectClass": "Trigger",
							"sid": 878276686323159,
							"parameters": {
								"unique-id": "uid"
							}
						}
					],
					"actions": [],
					"sid": 756875419506015,
					"children": [
						{
							"eventType": "comment",
							"text": "Show an artwork or shop item"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Trigger",
									"sid": 343385163892903,
									"parameters": {
										"instance-variable": "id",
										"comparison": 5,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"callFunction": "menuModal",
									"sid": 295910339837322,
									"parameters": [
										"Trigger.id",
										"Trigger.UID",
										"Trigger.type"
									]
								}
							],
							"sid": 459842306193728,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "Trigger",
											"sid": 450889878665867,
											"parameters": {
												"instance-variable": "type",
												"comparison": 0,
												"value": "\"shop\""
											},
											"isInverted": true
										},
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "Trigger",
											"sid": 539127689425664,
											"parameters": {
												"instance-variable": "observed"
											},
											"isInverted": true
										}
									],
									"actions": [
										{
											"id": "set-boolean-instvar",
											"objectClass": "Trigger",
											"sid": 574789590113223,
											"parameters": {
												"instance-variable": "observed",
												"value": "true"
											}
										},
										{
											"id": "add-to-eventvar",
											"objectClass": "System",
											"sid": 526686383139280,
											"parameters": {
												"variable": "STAT_observations",
												"value": "1"
											}
										}
									],
									"sid": 790270830079512
								},
								{
									"eventType": "comment",
									"text": "Cats"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "has-tags",
											"objectClass": "Trigger",
											"sid": 231987171208067,
											"parameters": {
												"tags": "\"cat\""
											}
										}
									],
									"actions": [],
									"sid": 455891305582920,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-eventvar",
													"objectClass": "System",
													"sid": 863608381592499,
													"parameters": {
														"variable": "SETTING_playerSkin",
														"comparison": 0,
														"value": "\"francis\""
													}
												}
											],
											"actions": [
												{
													"id": "play",
													"objectClass": "Audio",
													"sid": 681972534144198,
													"parameters": {
														"audio-file": "francisScream",
														"loop": "not-looping",
														"volume": "log10(SETTING_volumeSound)*20",
														"stereo-pan": "0",
														"tag-optional": "\"\""
													}
												},
												{
													"id": "start-timer",
													"objectClass": "Doomguy",
													"sid": 427815868358169,
													"behaviorType": "Timer",
													"parameters": {
														"duration": "1.5",
														"type": "once",
														"tag": "\"override\""
													}
												},
												{
													"id": "set-animation",
													"objectClass": "Doomguy",
													"sid": 406679870415561,
													"parameters": {
														"animation": "SETTING_playerSkin&\"Scream\"",
														"from": "beginning"
													}
												}
											],
											"sid": 103081453613062
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 125426907094635
												},
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 747759244757365,
													"parameters": {
														"first-value": "round(random(0, 9))",
														"comparison": 0,
														"second-value": "0"
													}
												}
											],
											"actions": [
												{
													"id": "play-by-name",
													"objectClass": "Audio",
													"sid": 891162663614182,
													"parameters": {
														"folder": "sounds",
														"audio-file-name": "\"menu/meow\"&round(random(1, 2))",
														"loop": "not-looping",
														"volume": "log10(SETTING_volumeSound)*20",
														"stereo-pan": "0",
														"tag-optional": "\"\""
													}
												}
											],
											"sid": 880071236587523
										}
									]
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Secret popup"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Trigger",
									"sid": 270890491731330,
									"parameters": {
										"instance-variable": "id",
										"comparison": 0,
										"value": "-1"
									}
								}
							],
							"actions": [
								{
									"callFunction": "popup",
									"sid": 770690285510026,
									"parameters": [
										"\"...I DON'T WANT TO LOOK AT THIS ONE.\"",
										"\"me\"",
										false
									]
								}
							],
							"sid": 789246952483672
						},
						{
							"eventType": "comment",
							"text": "Map popups"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Trigger",
									"sid": 443259814767320,
									"parameters": {
										"instance-variable": "id",
										"comparison": 0,
										"value": "-2"
									}
								}
							],
							"actions": [
								{
									"callFunction": "popup",
									"sid": 639724624554549,
									"parameters": [
										"\"YOU ARE IN: RENAISSANCE WING.\"",
										"\"map\"",
										false
									]
								}
							],
							"sid": 574528137649564
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Trigger",
									"sid": 955450583710837,
									"parameters": {
										"instance-variable": "id",
										"comparison": 0,
										"value": "-3"
									}
								}
							],
							"actions": [
								{
									"callFunction": "popup",
									"sid": 437403063954633,
									"parameters": [
										"\"YOU ARE IN: JAPANESE WING.\"",
										"\"map\"",
										false
									]
								}
							],
							"sid": 860490318996665
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Trigger",
									"sid": 748643852541551,
									"parameters": {
										"instance-variable": "id",
										"comparison": 0,
										"value": "-4"
									}
								}
							],
							"actions": [
								{
									"callFunction": "popup",
									"sid": 330204565232004,
									"parameters": [
										"\"YOU ARE IN: SCULPTURE GARDEN.\"",
										"\"map\"",
										false
									]
								}
							],
							"sid": 712525255042994
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Walk-on triggers"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "Player",
							"sid": 707664426493959,
							"parameters": {
								"object": "Trigger"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "Trigger",
							"sid": 668084573445670,
							"parameters": {
								"instance-variable": "id",
								"comparison": 0,
								"value": "-99"
							}
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "Trigger",
							"sid": 186733190568323
						}
					],
					"sid": 805561523655324,
					"children": [
						{
							"eventType": "comment",
							"text": "Unlock secrets"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "has-tags",
									"objectClass": "Trigger",
									"sid": 291246861674268,
									"parameters": {
										"tags": "\"unlock\""
									}
								}
							],
							"actions": [
								{
									"id": "play",
									"objectClass": "Audio",
									"sid": 546645629120003,
									"parameters": {
										"audio-file": "shuffle",
										"loop": "not-looping",
										"volume": "log10(SETTING_volumeSound)*50",
										"stereo-pan": "0",
										"tag-optional": "\"\""
									}
								}
							],
							"sid": 679308523669288,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-on-layer",
											"objectClass": "Ground",
											"sid": 246348910118726,
											"parameters": {
												"layer": "\"Secret\""
											}
										}
									],
									"actions": [
										{
											"id": "destroy",
											"objectClass": "Ground",
											"sid": 463664927015166
										}
									],
									"sid": 325611542277691
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-on-layer",
											"objectClass": "Overlay",
											"sid": 440121976910784,
											"parameters": {
												"layer": "\"Secret\""
											}
										}
									],
									"actions": [
										{
											"id": "destroy",
											"objectClass": "Overlay",
											"sid": 259097411052433
										}
									],
									"sid": 861973252587144
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Secrets"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "has-tags",
									"objectClass": "Trigger",
									"sid": 730026793599151,
									"parameters": {
										"tags": "\"courtyard\""
									}
								}
							],
							"actions": [
								{
									"id": "add-to-eventvar",
									"objectClass": "System",
									"sid": 643902262801660,
									"parameters": {
										"variable": "STAT_secrets",
										"value": "1"
									}
								},
								{
									"callFunction": "popup",
									"sid": 390650747583930,
									"parameters": [
										"\"YOU FOUND A SECRET AREA!\"",
										"\"secret\"",
										false
									]
								}
							],
							"sid": 141770912344220
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "has-tags",
									"objectClass": "Trigger",
									"sid": 146455305300880,
									"parameters": {
										"tags": "\"galaktor\""
									}
								}
							],
							"actions": [
								{
									"id": "add-to-eventvar",
									"objectClass": "System",
									"sid": 175172083878039,
									"parameters": {
										"variable": "STAT_secrets",
										"value": "1"
									}
								},
								{
									"callFunction": "popup",
									"sid": 731496322342702,
									"parameters": [
										"\"YOU FOUND GALAKTOR'S HIDEOUT!\"",
										"\"secret\"",
										false
									]
								}
							],
							"sid": 871335128700920
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "has-tags",
									"objectClass": "Trigger",
									"sid": 906984299854445,
									"parameters": {
										"tags": "\"me\""
									}
								}
							],
							"actions": [
								{
									"id": "add-to-eventvar",
									"objectClass": "System",
									"sid": 933166137931431,
									"parameters": {
										"variable": "STAT_secrets",
										"value": "1"
									}
								},
								{
									"callFunction": "popup",
									"sid": 873203826562115,
									"parameters": [
										"\"YOU FOUND A LONE PAINTING!\"",
										"\"secret\"",
										false
									]
								}
							],
							"sid": 379118355781582
						}
					]
				}
			],
			"sid": 423178946899278
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Level - Pickups",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Collecting pickups"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "PlayerPickup",
							"sid": 369767340101374,
							"parameters": {
								"object": "Billboard"
							}
						}
					],
					"actions": [],
					"sid": 465379519547932,
					"children": [
						{
							"eventType": "comment",
							"text": "Valid pickup; count it towards our total items and look up on pickups array"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Billboard",
									"sid": 335553799724370,
									"parameters": {
										"instance-variable": "type",
										"comparison": 0,
										"value": "\"\""
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"callFunction": "popup",
									"sid": 885547166399019,
									"parameters": [
										"uppercase(Pickups.At(Pickups.IndexOf(Billboard.type), 1))",
										"Billboard.type = \"beer\" ? \"weapon\" : \"item\"",
										true
									]
								},
								{
									"id": "add-to-eventvar",
									"objectClass": "System",
									"sid": 579197631544976,
									"parameters": {
										"variable": "STAT_items",
										"value": "1"
									}
								},
								{
									"id": "destroy",
									"objectClass": "Billboard",
									"sid": 698878599734797
								}
							],
							"sid": 786441474822234
						},
						{
							"eventType": "comment",
							"text": "Every item counts towards a different stat"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Billboard",
									"sid": 564728354765503,
									"parameters": {
										"instance-variable": "type",
										"comparison": 0,
										"value": "\"cash\""
									}
								}
							],
							"actions": [
								{
									"id": "add-to-eventvar",
									"objectClass": "System",
									"sid": 170461123866773,
									"parameters": {
										"variable": "STAT_wealth",
										"value": "25"
									}
								}
							],
							"sid": 129463639477500
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Billboard",
									"sid": 641202916900909,
									"parameters": {
										"instance-variable": "type",
										"comparison": 0,
										"value": "\"bigcash\""
									}
								}
							],
							"actions": [
								{
									"id": "add-to-eventvar",
									"objectClass": "System",
									"sid": 768928646032568,
									"parameters": {
										"variable": "STAT_wealth",
										"value": "499"
									}
								}
							],
							"sid": 853017499184753
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Billboard",
									"sid": 179942286410710,
									"parameters": {
										"instance-variable": "type",
										"comparison": 0,
										"value": "\"wine\""
									}
								}
							],
							"actions": [
								{
									"callFunction": "addDrinks",
									"sid": 252610255445575,
									"parameters": [
										"\"wine\"",
										"2"
									]
								}
							],
							"sid": 791386118184822
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Billboard",
									"sid": 101021997979320,
									"parameters": {
										"instance-variable": "type",
										"comparison": 0,
										"value": "\"beerpack\""
									}
								}
							],
							"actions": [
								{
									"callFunction": "addDrinks",
									"sid": 247891385167301,
									"parameters": [
										"\"beer\"",
										"6"
									]
								}
							],
							"sid": 969186069066758
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Billboard",
									"sid": 589030823273394,
									"parameters": {
										"instance-variable": "type",
										"comparison": 0,
										"value": "\"cheese\""
									}
								}
							],
							"actions": [
								{
									"id": "add-to-eventvar",
									"objectClass": "System",
									"sid": 499736489540161,
									"parameters": {
										"variable": "STAT_cheese",
										"value": "10"
									}
								}
							],
							"sid": 104141537652933
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Billboard",
									"sid": 863088531061620,
									"parameters": {
										"instance-variable": "type",
										"comparison": 0,
										"value": "\"bigcheese\""
									}
								}
							],
							"actions": [
								{
									"id": "add-to-eventvar",
									"objectClass": "System",
									"sid": 945669399303736,
									"parameters": {
										"variable": "STAT_cheese",
										"value": "30"
									}
								}
							],
							"sid": 887241944241922
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Billboard",
									"sid": 575446800133025,
									"parameters": {
										"instance-variable": "type",
										"comparison": 0,
										"value": "\"beer\""
									}
								}
							],
							"actions": [
								{
									"id": "set-at-xy",
									"objectClass": "Drinks",
									"sid": 895472291815599,
									"parameters": {
										"x": "Drinks.IndexOf(\"beer\")",
										"y": "2",
										"value": "\"true\""
									}
								},
								{
									"callFunction": "addDrinks",
									"sid": 942316875633829,
									"parameters": [
										"\"beer\"",
										"6"
									]
								},
								{
									"type": "comment",
									"text": "He's happy"
								},
								{
									"id": "start-timer",
									"objectClass": "Doomguy",
									"sid": 837432681139771,
									"behaviorType": "Timer",
									"parameters": {
										"duration": "2",
										"type": "once",
										"tag": "\"override\""
									}
								},
								{
									"id": "set-animation",
									"objectClass": "Doomguy",
									"sid": 758190291772866,
									"parameters": {
										"animation": "SETTING_playerSkin&\"Beer\"",
										"from": "beginning"
									}
								},
								{
									"type": "comment",
									"text": "Set beer to current active drink"
								},
								{
									"id": "play-timeline",
									"objectClass": "TimelineController",
									"sid": 996347057763438,
									"parameters": {
										"timeline": "ForceSwap",
										"tags": "\"swap\""
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 821484030725741,
									"parameters": {
										"variable": "PLAYER_drink",
										"value": "2"
									}
								}
							],
							"sid": 387630028485529
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Show a popup"
				},
				{
					"functionName": "popup",
					"functionDescription": "Show a popup, optionally with a flash",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "text",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 531453355758594
						},
						{
							"name": "type",
							"type": "string",
							"initialValue": "item",
							"comment": "",
							"sid": 620420423992441
						},
						{
							"name": "flash",
							"type": "boolean",
							"initialValue": "false",
							"comment": "",
							"sid": 353041071328157
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "start-timer",
							"objectClass": "Flash",
							"sid": 327552914025788,
							"behaviorType": "Timer",
							"parameters": {
								"duration": "3",
								"type": "once",
								"tag": "\"popup\""
							}
						}
					],
					"sid": 869636628053356,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "has-tags",
									"objectClass": "PopupFont",
									"sid": 403619590823769,
									"parameters": {
										"tags": "\"popup\""
									}
								}
							],
							"actions": [
								{
									"id": "set-text",
									"objectClass": "PopupFont",
									"sid": 306449501300474,
									"parameters": {
										"text": "text"
									}
								},
								{
									"id": "set-visible",
									"objectClass": "PopupFont",
									"sid": 667445165862806,
									"parameters": {
										"visibility": "visible"
									}
								}
							],
							"sid": 180704226045834
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 121239855448936,
									"parameters": {
										"variable": "flash"
									}
								},
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 390011314419487,
									"parameters": {
										"variable": "SETTING_flashing",
										"comparison": 5,
										"value": "1"
									}
								}
							],
							"actions": [
								{
									"id": "set-visible",
									"objectClass": "Flash",
									"sid": 304050951454324,
									"parameters": {
										"visibility": "visible"
									}
								},
								{
									"id": "start-timer",
									"objectClass": "Flash",
									"sid": 920550141624167,
									"behaviorType": "Timer",
									"parameters": {
										"duration": "0.25",
										"type": "once",
										"tag": "\"flash\""
									}
								}
							],
							"sid": 492759946627327
						},
						{
							"eventType": "comment",
							"text": "Different types have different sounds"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 194243322924568,
									"parameters": {
										"variable": "type",
										"comparison": 0,
										"value": "\"item\""
									}
								}
							],
							"actions": [
								{
									"id": "play",
									"objectClass": "Audio",
									"sid": 738195938756020,
									"parameters": {
										"audio-file": "getItem",
										"loop": "not-looping",
										"volume": "log10(SETTING_volumeSound)*20",
										"stereo-pan": "0",
										"tag-optional": "\"\""
									}
								}
							],
							"sid": 665279356260829
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 527953816676253,
									"parameters": {
										"variable": "type",
										"comparison": 0,
										"value": "\"weapon\""
									}
								}
							],
							"actions": [
								{
									"id": "play",
									"objectClass": "Audio",
									"sid": 757045676251942,
									"parameters": {
										"audio-file": "getWeapon",
										"loop": "not-looping",
										"volume": "log10(SETTING_volumeSound)*20",
										"stereo-pan": "0",
										"tag-optional": "\"\""
									}
								}
							],
							"sid": 726940400193428
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 316439999868918,
									"parameters": {
										"variable": "type",
										"comparison": 0,
										"value": "\"secret\""
									}
								}
							],
							"actions": [
								{
									"id": "play",
									"objectClass": "Audio",
									"sid": 353624450733340,
									"parameters": {
										"audio-file": "secret",
										"loop": "not-looping",
										"volume": "log10(SETTING_volumeSound)*20",
										"stereo-pan": "0",
										"tag-optional": "\"\""
									}
								}
							],
							"sid": 870391978181035
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 813247574268888,
									"parameters": {
										"variable": "type",
										"comparison": 0,
										"value": "\"map\""
									}
								}
							],
							"actions": [
								{
									"id": "play",
									"objectClass": "Audio",
									"sid": 416113948184699,
									"parameters": {
										"audio-file": "menuSelect",
										"loop": "not-looping",
										"volume": "log10(SETTING_volumeSound)*20",
										"stereo-pan": "0",
										"tag-optional": "\"\""
									}
								}
							],
							"sid": 387307089004868
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 478937490179070,
									"parameters": {
										"variable": "type",
										"comparison": 0,
										"value": "\"me\""
									}
								}
							],
							"actions": [
								{
									"id": "play-by-name",
									"objectClass": "Audio",
									"sid": 239147154418616,
									"parameters": {
										"folder": "sounds",
										"audio-file-name": "SETTING_playerSound&\"Grunt\"",
										"loop": "not-looping",
										"volume": "log10(SETTING_volumeSound)*20",
										"stereo-pan": "0",
										"tag-optional": "\"grunt\""
									}
								},
								{
									"id": "set-playback-rate",
									"objectClass": "Audio",
									"sid": 295103095008036,
									"parameters": {
										"tag": "\"grunt\"",
										"playback-rate": "random(0.95, 1.05)"
									}
								}
							],
							"sid": 265110338366433
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Timers are up - hide popup elements"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-timer",
							"objectClass": "Flash",
							"sid": 894277629958507,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"popup\""
							}
						},
						{
							"id": "has-tags",
							"objectClass": "PopupFont",
							"sid": 475868334880494,
							"parameters": {
								"tags": "\"popup\""
							}
						}
					],
					"actions": [
						{
							"id": "set-visible",
							"objectClass": "PopupFont",
							"sid": 513962372252057,
							"parameters": {
								"visibility": "invisible"
							}
						}
					],
					"sid": 502053401875280
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-timer",
							"objectClass": "Flash",
							"sid": 915065801801642,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"flash\""
							}
						}
					],
					"actions": [
						{
							"id": "set-visible",
							"objectClass": "Flash",
							"sid": 443923355488178,
							"parameters": {
								"visibility": "invisible"
							}
						}
					],
					"sid": 317101545626216
				}
			],
			"sid": 927847955469126
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Level - Movement",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "group",
					"disabled": false,
					"title": "Level - Movement (Input)",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 702074802174323,
									"parameters": {
										"variable": "MENU_menu",
										"comparison": 0,
										"value": "\"None\""
									}
								},
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 270699440481503,
									"parameters": {
										"variable": "TRANSITION_running"
									},
									"isInverted": true
								}
							],
							"actions": [],
							"sid": 640179992988207,
							"children": [
								{
									"eventType": "comment",
									"text": "Up"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "key-is-down",
											"objectClass": "Keyboard",
											"sid": 686857747187216,
											"parameters": {
												"key": 38
											}
										},
										{
											"id": "key-is-down",
											"objectClass": "Keyboard",
											"sid": 600345902074845,
											"parameters": {
												"key": 87
											}
										},
										{
											"id": "is-button-down",
											"objectClass": "Gamepad",
											"sid": 267797599828660,
											"parameters": {
												"gamepad": "0",
												"button": "d-pad-up"
											}
										},
										{
											"id": "compare-axis",
											"objectClass": "Gamepad",
											"sid": 211983417378389,
											"parameters": {
												"gamepad": "0",
												"axis": "left-analog-y-axis",
												"comparison": 2,
												"value": "-1"
											}
										}
									],
									"actions": [
										{
											"id": "set-boolean-instvar",
											"objectClass": "Player",
											"sid": 851007143840289,
											"parameters": {
												"instance-variable": "playerUp",
												"value": "true"
											}
										}
									],
									"sid": 703308919450658,
									"isOrBlock": true
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 196396417919895
										},
										{
											"id": "is-touching-object",
											"objectClass": "Touch",
											"sid": 577241643994538,
											"parameters": {
												"object": "MobileButtons"
											}
										},
										{
											"id": "compare-animation-frame",
											"objectClass": "MobileButtons",
											"sid": 741470106680368,
											"parameters": {
												"comparison": 0,
												"number": "0"
											}
										}
									],
									"actions": [
										{
											"id": "set-boolean-instvar",
											"objectClass": "Player",
											"sid": 484836755215921,
											"parameters": {
												"instance-variable": "playerUp",
												"value": "true"
											}
										}
									],
									"sid": 553559929798773
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 542537535580752
										}
									],
									"actions": [
										{
											"id": "set-boolean-instvar",
											"objectClass": "Player",
											"sid": 622389765591124,
											"parameters": {
												"instance-variable": "playerUp",
												"value": "false"
											}
										}
									],
									"sid": 480676180175182
								},
								{
									"eventType": "comment",
									"text": "Down"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "key-is-down",
											"objectClass": "Keyboard",
											"sid": 774198890131150,
											"parameters": {
												"key": 40
											}
										},
										{
											"id": "key-is-down",
											"objectClass": "Keyboard",
											"sid": 165811338118592,
											"parameters": {
												"key": 83
											}
										},
										{
											"id": "is-button-down",
											"objectClass": "Gamepad",
											"sid": 167677177558153,
											"parameters": {
												"gamepad": "0",
												"button": "d-pad-down"
											}
										},
										{
											"id": "compare-axis",
											"objectClass": "Gamepad",
											"sid": 662480864887338,
											"parameters": {
												"gamepad": "0",
												"axis": "left-analog-y-axis",
												"comparison": 4,
												"value": "1"
											}
										}
									],
									"actions": [
										{
											"id": "set-boolean-instvar",
											"objectClass": "Player",
											"sid": 129873751346049,
											"parameters": {
												"instance-variable": "playerDown",
												"value": "true"
											}
										}
									],
									"sid": 145584681591017,
									"isOrBlock": true
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 589406810148306
										},
										{
											"id": "is-touching-object",
											"objectClass": "Touch",
											"sid": 256838187402419,
											"parameters": {
												"object": "MobileButtons"
											}
										},
										{
											"id": "compare-animation-frame",
											"objectClass": "MobileButtons",
											"sid": 613835951082609,
											"parameters": {
												"comparison": 0,
												"number": "1"
											}
										}
									],
									"actions": [
										{
											"id": "set-boolean-instvar",
											"objectClass": "Player",
											"sid": 489882858263025,
											"parameters": {
												"instance-variable": "playerDown",
												"value": "true"
											}
										}
									],
									"sid": 592077297094909
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 130778897534738
										}
									],
									"actions": [
										{
											"id": "set-boolean-instvar",
											"objectClass": "Player",
											"sid": 125509078002030,
											"parameters": {
												"instance-variable": "playerDown",
												"value": "false"
											}
										}
									],
									"sid": 412884124652081
								},
								{
									"eventType": "comment",
									"text": "Left"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "key-is-down",
											"objectClass": "Keyboard",
											"sid": 646515960904382,
											"parameters": {
												"key": 65
											}
										},
										{
											"id": "compare-axis",
											"objectClass": "Gamepad",
											"sid": 459300647983504,
											"parameters": {
												"gamepad": "0",
												"axis": "left-analog-x-axis",
												"comparison": 2,
												"value": "-1"
											}
										}
									],
									"actions": [
										{
											"id": "set-boolean-instvar",
											"objectClass": "Player",
											"sid": 849541591378919,
											"parameters": {
												"instance-variable": "playerLeft",
												"value": "true"
											}
										}
									],
									"sid": 421208565654159,
									"isOrBlock": true
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 860483627514157
										}
									],
									"actions": [
										{
											"id": "set-boolean-instvar",
											"objectClass": "Player",
											"sid": 562710110282653,
											"parameters": {
												"instance-variable": "playerLeft",
												"value": "false"
											}
										}
									],
									"sid": 266455672503634
								},
								{
									"eventType": "comment",
									"text": "Right"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "key-is-down",
											"objectClass": "Keyboard",
											"sid": 743785228927959,
											"parameters": {
												"key": 68
											}
										},
										{
											"id": "compare-axis",
											"objectClass": "Gamepad",
											"sid": 511690037264323,
											"parameters": {
												"gamepad": "0",
												"axis": "left-analog-x-axis",
												"comparison": 4,
												"value": "1"
											}
										}
									],
									"actions": [
										{
											"id": "set-boolean-instvar",
											"objectClass": "Player",
											"sid": 996440468539634,
											"parameters": {
												"instance-variable": "playerRight",
												"value": "true"
											}
										}
									],
									"sid": 404701881462379,
									"isOrBlock": true
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 385071942664423
										}
									],
									"actions": [
										{
											"id": "set-boolean-instvar",
											"objectClass": "Player",
											"sid": 456372485763959,
											"parameters": {
												"instance-variable": "playerRight",
												"value": "false"
											}
										}
									],
									"sid": 877260473920589
								},
								{
									"eventType": "comment",
									"text": "Controller sensitivity"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-axis",
											"objectClass": "Gamepad",
											"sid": 162543969507787,
											"parameters": {
												"gamepad": "0",
												"axis": "left-analog-y-axis",
												"comparison": 2,
												"value": "-1"
											}
										},
										{
											"id": "compare-axis",
											"objectClass": "Gamepad",
											"sid": 569353514468345,
											"parameters": {
												"gamepad": "0",
												"axis": "left-analog-y-axis",
												"comparison": 4,
												"value": "1"
											}
										},
										{
											"id": "compare-axis",
											"objectClass": "Gamepad",
											"sid": 318797930021012,
											"parameters": {
												"gamepad": "0",
												"axis": "left-analog-x-axis",
												"comparison": 2,
												"value": "-1"
											}
										},
										{
											"id": "compare-axis",
											"objectClass": "Gamepad",
											"sid": 204727923080632,
											"parameters": {
												"gamepad": "0",
												"axis": "left-analog-x-axis",
												"comparison": 4,
												"value": "1"
											}
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 577382544647186,
											"parameters": {
												"variable": "PLAYER_horizontalScale",
												"value": "abs(Gamepad.RawAxis(0, 0))"
											}
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 765460880256814,
											"parameters": {
												"variable": "PLAYER_verticalScale",
												"value": "abs(Gamepad.RawAxis(0, 1))"
											}
										}
									],
									"sid": 555117103608444,
									"isOrBlock": true
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 494996970131853
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 447175891834804,
											"parameters": {
												"variable": "PLAYER_horizontalScale",
												"value": "1"
											}
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 326407079999883,
											"parameters": {
												"variable": "PLAYER_verticalScale",
												"value": "1"
											}
										}
									],
									"sid": 311067709333201
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 968850091690070
								}
							],
							"actions": [
								{
									"id": "set-boolean-instvar",
									"objectClass": "Player",
									"sid": 625035477828437,
									"parameters": {
										"instance-variable": "playerUp",
										"value": "false"
									}
								},
								{
									"id": "set-boolean-instvar",
									"objectClass": "Player",
									"sid": 773000259511217,
									"parameters": {
										"instance-variable": "playerDown",
										"value": "false"
									}
								},
								{
									"id": "set-boolean-instvar",
									"objectClass": "Player",
									"sid": 967964977918324,
									"parameters": {
										"instance-variable": "playerLeft",
										"value": "false"
									}
								},
								{
									"id": "set-boolean-instvar",
									"objectClass": "Player",
									"sid": 690043437551045,
									"parameters": {
										"instance-variable": "playerRight",
										"value": "false"
									}
								}
							],
							"sid": 185761895097570
						}
					],
					"sid": 418599331289220
				},
				{
					"eventType": "comment",
					"text": "Main movement loop"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-tick",
							"objectClass": "System",
							"sid": 792115196484863
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Get true player directions based on input directions"
						},
						{
							"id": "set-instvar-value",
							"objectClass": "Player",
							"sid": 268474787487422,
							"parameters": {
								"instance-variable": "playerHorizontal",
								"value": "Player.playerRight-Player.playerLeft"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "Player",
							"sid": 456983930902708,
							"parameters": {
								"instance-variable": "playerVertical",
								"value": "Player.playerDown-Player.playerUp"
							}
						}
					],
					"sid": 572702564490138,
					"children": [
						{
							"eventType": "comment",
							"text": "Player is moving horizontally, accelerate"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Player",
									"sid": 702642523183576,
									"parameters": {
										"instance-variable": "playerHorizontal",
										"comparison": 0,
										"value": "0"
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "Player",
									"sid": 362068932643290,
									"parameters": {
										"instance-variable": "playerSpeedHorizontal",
										"value": "clamp(Self.playerSpeedHorizontal+Self.playerHorizontal*(PLAYER_acceleration*PLAYER_verticalScale*0.75*dt),\n-Self.8Direction.MaxSpeed*PLAYER_horizontalScale*0.75,\nSelf.8Direction.MaxSpeed*PLAYER_horizontalScale*0.75)"
									}
								}
							],
							"sid": 505639295252922
						},
						{
							"eventType": "comment",
							"text": "Player is not moving horizontally, decelerate"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 740076606368586
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "Player",
									"sid": 228386110370947,
									"parameters": {
										"instance-variable": "playerSpeedHorizontal",
										"value": "sign(Self.playerSpeedHorizontal)*max(abs(Self.playerSpeedHorizontal)-PLAYER_deceleration*0.75*dt, 0)\n"
									}
								}
							],
							"sid": 311530643351692
						},
						{
							"eventType": "comment",
							"text": "Player is moving vertically, accelerate"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Player",
									"sid": 779786969319876,
									"parameters": {
										"instance-variable": "playerVertical",
										"comparison": 0,
										"value": "0"
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "Player",
									"sid": 743826799424733,
									"parameters": {
										"instance-variable": "playerSpeedVertical",
										"value": "clamp(Self.playerSpeedVertical-Self.playerVertical*(PLAYER_acceleration*PLAYER_verticalScale*dt),\n-Self.8Direction.MaxSpeed*PLAYER_verticalScale,\nSelf.8Direction.MaxSpeed*PLAYER_verticalScale)"
									}
								}
							],
							"sid": 281272177345959
						},
						{
							"eventType": "comment",
							"text": "Player is not moving vertically, decelerate"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 637397829608825
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "Player",
									"sid": 200399227705976,
									"parameters": {
										"instance-variable": "playerSpeedVertical",
										"value": "sign(Self.playerSpeedVertical)*max(abs(Self.playerSpeedVertical)-PLAYER_deceleration*dt, 0)\n"
									}
								}
							],
							"sid": 138970136841393
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Move the player"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-tick",
							"objectClass": "System",
							"sid": 184625479515486
						}
					],
					"actions": [
						{
							"id": "set-vector-x",
							"objectClass": "Player",
							"sid": 369341143765862,
							"behaviorType": "8Direction",
							"parameters": {
								"vector-x": "(cos(3DCamera.CameraXRotation) * Self.playerSpeedVertical) + (cos(3DCamera.CameraXRotation + 90) * Self.playerSpeedHorizontal)"
							}
						},
						{
							"id": "set-vector-y",
							"objectClass": "Player",
							"sid": 943015070499154,
							"behaviorType": "8Direction",
							"parameters": {
								"vector-y": "(sin(3DCamera.CameraXRotation) * Self.playerSpeedVertical) + (sin(3DCamera.CameraXRotation + 90) * Self.playerSpeedHorizontal)"
							}
						}
					],
					"sid": 502934772174805
				}
			],
			"sid": 658958264674554
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Level - Collision",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Calculate player's Z speed, incorporating gravity"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-tick",
							"objectClass": "System",
							"sid": 278362157499412
						}
					],
					"actions": [
						{
							"id": "subtract-from-eventvar",
							"objectClass": "System",
							"sid": 172758242284774,
							"parameters": {
								"variable": "PLAYER_speedZ",
								"value": "PLAYER_gravity * dt"
							}
						},
						{
							"id": "set-z-elevation",
							"objectClass": "Player",
							"sid": 934299322039392,
							"parameters": {
								"z": "Self.ZElevation + PLAYER_speedZ"
							}
						}
					],
					"sid": 771146817483392
				},
				{
					"eventType": "comment",
					"text": "If the player is below ground where it doesn't make sense, stand them on top of it"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 645336085641718,
							"parameters": {
								"variable": "PLAYER_speedZ",
								"comparison": 2,
								"value": "0"
							}
						},
						{
							"id": "is-overlapping-another-object",
							"objectClass": "Player",
							"sid": 222798068405287,
							"parameters": {
								"object": "Ground"
							}
						},
						{
							"id": "compare-z-elevation",
							"objectClass": "Ground",
							"sid": 572370561380323,
							"parameters": {
								"which": "z-elevation",
								"comparison": 5,
								"z-elevation": "Player.ZElevation - Self.ZHeight"
							}
						},
						{
							"id": "compare-z-elevation",
							"objectClass": "Ground",
							"sid": 459985703030991,
							"parameters": {
								"which": "z-elevation",
								"comparison": 3,
								"z-elevation": "Player.ZElevation - Self.ZHeight + 10"
							}
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 482791553291699,
							"parameters": {
								"variable": "PLAYER_speedZ",
								"value": "0"
							}
						},
						{
							"id": "set-z-elevation",
							"objectClass": "Player",
							"sid": 111742507421115,
							"parameters": {
								"z": "Ground.ZElevation + Ground.ZHeight"
							}
						},
						{
							"id": "set-boolean-eventvar",
							"objectClass": "System",
							"sid": 951444803938946,
							"parameters": {
								"variable": "PLAYER_onGround",
								"value": "true"
							}
						}
					],
					"sid": 645851256474923
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 733597421788947
						}
					],
					"actions": [
						{
							"id": "set-boolean-eventvar",
							"objectClass": "System",
							"sid": 660035839733844,
							"parameters": {
								"variable": "PLAYER_onGround",
								"value": "false"
							}
						}
					],
					"sid": 302637063996435
				},
				{
					"eventType": "comment",
					"text": "Collision types"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-tick",
							"objectClass": "System",
							"sid": 982676573096129
						}
					],
					"actions": [
						{
							"id": "set-enabled",
							"objectClass": "Ground",
							"sid": 231249270143775,
							"behaviorType": "Solid",
							"parameters": {
								"state": "disabled"
							}
						}
					],
					"sid": 759943307081797
				},
				{
					"eventType": "comment",
					"text": "Ground that ends more than 10 units above the player is solid; ground that begins higher than the player's head is ignored"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-z-elevation",
							"objectClass": "Ground",
							"sid": 891779778418662,
							"parameters": {
								"which": "z-elevation",
								"comparison": 4,
								"z-elevation": "Player.ZElevation-Self.ZHeight+10"
							}
						},
						{
							"id": "compare-z-elevation",
							"objectClass": "Ground",
							"sid": 461562084677304,
							"parameters": {
								"which": "z-elevation",
								"comparison": 2,
								"z-elevation": "Player.ZElevation+PLAYER_cameraHeight"
							}
						}
					],
					"actions": [
						{
							"id": "set-enabled",
							"objectClass": "Ground",
							"sid": 912059686395014,
							"behaviorType": "Solid",
							"parameters": {
								"state": "enabled"
							}
						}
					],
					"sid": 843186579474882
				},
				{
					"eventType": "comment",
					"text": "The player will bump into ground that's 4 units or less above their head; given a safe zone of 8 units above that"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-z-elevation",
							"objectClass": "Ground",
							"sid": 517288556693060,
							"parameters": {
								"which": "z-elevation",
								"comparison": 2,
								"z-elevation": "Player.ZElevation+PLAYER_cameraHeight+4"
							}
						},
						{
							"id": "compare-z-elevation",
							"objectClass": "Ground",
							"sid": 172853278095869,
							"parameters": {
								"which": "z-elevation",
								"comparison": 4,
								"z-elevation": "Player.ZElevation+PLAYER_cameraHeight-8"
							}
						}
					],
					"actions": [],
					"sid": 337864355544165,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-overlapping-another-object",
									"objectClass": "Ground",
									"sid": 702642062278281,
									"parameters": {
										"object": "Player"
									}
								}
							],
							"actions": [
								{
									"id": "set-enabled",
									"objectClass": "Ground",
									"sid": 641700088867017,
									"behaviorType": "Solid",
									"parameters": {
										"state": "disabled"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 477433365673112,
									"parameters": {
										"variable": "PLAYER_speedZ",
										"value": "0"
									}
								},
								{
									"id": "set-z-elevation",
									"objectClass": "Player",
									"sid": 995925071990143,
									"parameters": {
										"z": "Ground.ZElevation - PLAYER_cameraHeight - 4"
									}
								}
							],
							"sid": 309558374546606
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Ground that ends less than 10 units above the player can be automatically walked up onto"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "Player",
							"sid": 666633685322465,
							"parameters": {
								"object": "Ground"
							}
						},
						{
							"id": "is-between-values",
							"objectClass": "System",
							"sid": 657504579097681,
							"parameters": {
								"value": "round((Ground.ZElevation + Ground.ZHeight) - Player.ZElevation)",
								"lower-bound": "0",
								"upper-bound": "10"
							}
						}
					],
					"actions": [
						{
							"id": "set-z-elevation",
							"objectClass": "Player",
							"sid": 670853725019049,
							"parameters": {
								"z": "Ground.ZElevation+Ground.ZHeight"
							}
						}
					],
					"sid": 594683626206305,
					"children": [
						{
							"eventType": "comment",
							"text": "Smooth camera elevation so there's no jarring screen bump"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 616053053666131,
									"parameters": {
										"variable": "PLAYER_onGround"
									}
								}
							],
							"actions": [
								{
									"id": "stop-all-tweens",
									"objectClass": "Player",
									"sid": 992065340800980,
									"behaviorType": "Tween"
								},
								{
									"id": "tween-value",
									"objectClass": "Player",
									"sid": 769095812178172,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"elevation\"",
										"start-value": "PLAYER_cameraZ",
										"end-value": "Player.ZElevation",
										"time": "0.1",
										"ease": "easeoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								}
							],
							"sid": 352329359421537
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Set camera elevation; smooth or not"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-playing",
							"objectClass": "Player",
							"sid": 900918303894955,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"elevation\""
							}
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 429206443345693,
							"parameters": {
								"variable": "PLAYER_cameraZ",
								"value": "Player.Tween.Value(\"elevation\")"
							}
						}
					],
					"sid": 462036340501969
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 491892337172088
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 801516667632293,
							"parameters": {
								"variable": "PLAYER_cameraZ",
								"value": "Player.ZElevation"
							}
						}
					],
					"sid": 993542952643038
				},
				{
					"eventType": "comment",
					"text": "Kill the player if they manage to fall through the world"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-z-elevation",
							"objectClass": "Player",
							"sid": 142706512547478,
							"parameters": {
								"which": "z-elevation",
								"comparison": 2,
								"z-elevation": "-256"
							}
						},
						{
							"id": "trigger-once-while-true",
							"objectClass": "System",
							"sid": 601415571920654
						}
					],
					"actions": [
						{
							"id": "start-timer",
							"objectClass": "Doomguy",
							"sid": 380349912218259,
							"behaviorType": "Timer",
							"parameters": {
								"duration": "5",
								"type": "once",
								"tag": "\"override\""
							}
						},
						{
							"id": "set-animation",
							"objectClass": "Doomguy",
							"sid": 763046425163219,
							"parameters": {
								"animation": "SETTING_playerSkin&\"Scream\"",
								"from": "beginning"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 143013104811252,
							"parameters": {
								"variable": "PLAYER_speedZ",
								"value": "0"
							}
						},
						{
							"id": "play-by-name",
							"objectClass": "Audio",
							"sid": 795138949254310,
							"parameters": {
								"folder": "sounds",
								"audio-file-name": "SETTING_playerSound&\"ScreamBig\"",
								"loop": "not-looping",
								"volume": "log10(SETTING_volumeSound)*20",
								"stereo-pan": "0",
								"tag-optional": "\"grunt\""
							}
						},
						{
							"id": "release-pointer-lock",
							"objectClass": "Mouse",
							"sid": 894402512213484
						},
						{
							"callFunction": "transition",
							"sid": 232651014845845,
							"parameters": [
								"\"Title\""
							]
						},
						{
							"id": "stop",
							"objectClass": "Audio",
							"sid": 932445099070713,
							"parameters": {
								"tag": "\"music\""
							}
						}
					],
					"sid": 385354042447952
				}
			],
			"sid": 543555905608862
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Level - Camera",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Ask nicely for pointer lock whenever clicked"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-click",
							"objectClass": "Mouse",
							"sid": 657271439110242,
							"parameters": {
								"mouse-button": "left",
								"click-type": "clicked"
							}
						},
						{
							"id": "has-pointer-lock",
							"objectClass": "Mouse",
							"sid": 935735645275191,
							"isInverted": true
						},
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 434107255226323,
							"parameters": {
								"variable": "MENU_menu",
								"comparison": 0,
								"value": "\"None\""
							}
						}
					],
					"actions": [
						{
							"id": "request-pointer-lock",
							"objectClass": "Mouse",
							"sid": 824635436964163,
							"parameters": {
								"unadjusted-movement": false
							}
						}
					],
					"sid": 670013609768781
				},
				{
					"eventType": "comment",
					"text": "Update camera position, arm, and viewbob"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 956467929515470,
							"parameters": {
								"variable": "TRANSITION_movedLayout"
							}
						}
					],
					"actions": [
						{
							"id": "set-magnitude",
							"objectClass": "Arm",
							"sid": 773818834535905,
							"behaviorType": "Vertical",
							"parameters": {
								"magnitude": "4*(Player.8Direction.Speed/Player.8Direction.MaxSpeed)"
							}
						},
						{
							"id": "set-magnitude",
							"objectClass": "Arm",
							"sid": 162182017763306,
							"behaviorType": "Horizontal",
							"parameters": {
								"magnitude": "8*(Player.8Direction.Speed/Player.8Direction.MaxSpeed)"
							}
						},
						{
							"id": "set-magnitude",
							"objectClass": "Arm",
							"sid": 716464999789574,
							"behaviorType": "Bob",
							"parameters": {
								"magnitude": "2*(Player.8Direction.Speed/Player.8Direction.MaxSpeed)"
							}
						}
					],
					"sid": 361144927628420
				},
				{
					"eventType": "comment",
					"text": "Invalidate bogus values for mouse camera"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-pointer-locked",
							"objectClass": "Mouse",
							"sid": 183150742892020
						},
						{
							"id": "on-pointer-unlocked",
							"objectClass": "Mouse",
							"sid": 769008894620056
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 362681805072110,
							"parameters": {
								"variable": "PLAYER_mouseLook",
								"value": "0"
							}
						},
						{
							"id": "set-boolean-eventvar",
							"objectClass": "System",
							"sid": 106011734130550,
							"parameters": {
								"variable": "PLAYER_mouseLock",
								"value": "true"
							}
						}
					],
					"sid": 700414347163543,
					"isOrBlock": true
				},
				{
					"eventType": "comment",
					"text": "Set camera position"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 131641318586795,
							"parameters": {
								"variable": "TRANSITION_movedLayout"
							}
						}
					],
					"actions": [
						{
							"id": "set-position",
							"objectClass": "3DCamera",
							"sid": 991075654324422,
							"parameters": {
								"x": "Player.X",
								"y": "Player.Y",
								"z": "PLAYER_cameraZ+PLAYER_cameraHeight+Arm.Bob.Value",
								"which": "camera"
							}
						}
					],
					"sid": 911560011902001
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 345034673135765,
							"parameters": {
								"variable": "TRANSITION_running"
							},
							"isInverted": true
						}
					],
					"actions": [],
					"sid": 332853579390994,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 317517090798373,
									"parameters": {
										"variable": "MENU_menu",
										"comparison": 0,
										"value": "\"None\""
									}
								}
							],
							"actions": [],
							"sid": 834327360553648,
							"children": [
								{
									"eventType": "comment",
									"text": "Move camera with mouse; prone to returning bogus values, so validate it"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "on-movement",
											"objectClass": "Mouse",
											"sid": 846658782575522
										},
										{
											"id": "has-pointer-lock",
											"objectClass": "Mouse",
											"sid": 261547124264408
										}
									],
									"actions": [],
									"sid": 687366962111512,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-boolean-eventvar",
													"objectClass": "System",
													"sid": 797596287449894,
													"parameters": {
														"variable": "PLAYER_mouseLock"
													},
													"isInverted": true
												}
											],
											"actions": [
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 380559967954687,
													"parameters": {
														"variable": "PLAYER_mouseLook",
														"value": "Mouse.MovementX"
													}
												},
												{
													"callFunction": "moveCamera",
													"sid": 623139051334106,
													"parameters": [
														"PLAYER_mouseLook/10"
													]
												}
											],
											"sid": 986240935999676
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 891044762746686
												}
											],
											"actions": [
												{
													"id": "set-boolean-eventvar",
													"objectClass": "System",
													"sid": 146851250731401,
													"parameters": {
														"variable": "PLAYER_mouseLock",
														"value": "false"
													}
												}
											],
											"sid": 333123611688748
										}
									]
								},
								{
									"eventType": "comment",
									"text": "Move camera without mouse"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-axis",
											"objectClass": "Gamepad",
											"sid": 615732154215176,
											"parameters": {
												"gamepad": "0",
												"axis": "right-analog-x-axis",
												"comparison": 2,
												"value": "-1"
											}
										},
										{
											"id": "compare-axis",
											"objectClass": "Gamepad",
											"sid": 685614343201369,
											"parameters": {
												"gamepad": "0",
												"axis": "right-analog-x-axis",
												"comparison": 4,
												"value": "1"
											}
										}
									],
									"actions": [
										{
											"callFunction": "moveCamera",
											"sid": 933794571266129,
											"parameters": [
												"dt*Gamepad.Axis(0, 2)*1.5"
											]
										}
									],
									"sid": 307367139963147,
									"isOrBlock": true
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 988270620913525
										}
									],
									"actions": [],
									"sid": 354924098208210,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "key-is-down",
													"objectClass": "Keyboard",
													"sid": 791263067684788,
													"parameters": {
														"key": 37
													}
												},
												{
													"id": "is-button-down",
													"objectClass": "Gamepad",
													"sid": 421728772737188,
													"parameters": {
														"gamepad": "0",
														"button": "d-pad-left"
													}
												}
											],
											"actions": [
												{
													"callFunction": "moveCamera",
													"sid": 124417789207545,
													"parameters": [
														"dt*-90"
													]
												}
											],
											"sid": 488647489060796,
											"isOrBlock": true
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "key-is-down",
													"objectClass": "Keyboard",
													"sid": 626352272437379,
													"parameters": {
														"key": 39
													}
												},
												{
													"id": "is-button-down",
													"objectClass": "Gamepad",
													"sid": 391438644839180,
													"parameters": {
														"gamepad": "0",
														"button": "d-pad-right"
													}
												}
											],
											"actions": [
												{
													"callFunction": "moveCamera",
													"sid": 282222705523634,
													"parameters": [
														"dt*90"
													]
												}
											],
											"sid": 335872565788049,
											"isOrBlock": true
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-touching-object",
													"objectClass": "Touch",
													"sid": 648029636238420,
													"parameters": {
														"object": "MobileButtons"
													}
												}
											],
											"actions": [],
											"sid": 774205547716721,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-animation-frame",
															"objectClass": "MobileButtons",
															"sid": 841399827396032,
															"parameters": {
																"comparison": 0,
																"number": "2"
															}
														}
													],
													"actions": [
														{
															"callFunction": "moveCamera",
															"sid": 294296577026444,
															"parameters": [
																"dt*-60"
															]
														}
													],
													"sid": 296187511352076
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-animation-frame",
															"objectClass": "MobileButtons",
															"sid": 561218581554606,
															"parameters": {
																"comparison": 0,
																"number": "3"
															}
														}
													],
													"actions": [
														{
															"callFunction": "moveCamera",
															"sid": 377210135014150,
															"parameters": [
																"dt*60"
															]
														}
													],
													"sid": 199507156616840
												}
											]
										}
									]
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Player sight line follows camera angle"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "every-tick",
									"objectClass": "System",
									"sid": 288364108889717
								}
							],
							"actions": [
								{
									"id": "set-angle",
									"objectClass": "PlayerSight",
									"sid": 437915126053341,
									"parameters": {
										"angle": "3DCamera.CameraXRotation"
									}
								},
								{
									"id": "set-angle",
									"objectClass": "PlayerSightSmall",
									"sid": 806308285460244,
									"parameters": {
										"angle": "3DCamera.CameraXRotation"
									}
								}
							],
							"sid": 349662393309337
						}
					]
				},
				{
					"functionName": "moveCamera",
					"functionDescription": "Move the camera X degrees",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "rotation",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 323507780467576
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "rotate-camera",
							"objectClass": "3DCamera",
							"sid": 581045660733987,
							"parameters": {
								"rotate-x": "rotation",
								"rotate-y": "0",
								"min-polar-angle": "90",
								"max-polar-angle": "90"
							}
						}
					],
					"sid": 946860465391026
				}
			],
			"sid": 839359845488240
		},
		{
			"eventType": "comment",
			"text": "Pause the game"
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "compare-boolean-eventvar",
					"objectClass": "System",
					"sid": 364548998288527,
					"parameters": {
						"variable": "TRANSITION_running"
					},
					"isInverted": true
				},
				{
					"id": "compare-eventvar",
					"objectClass": "System",
					"sid": 944551406082330,
					"parameters": {
						"variable": "MENU_menu",
						"comparison": 0,
						"value": "\"Modal\""
					},
					"isInverted": true
				}
			],
			"actions": [],
			"sid": 375545763548546,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 201044130774516,
							"parameters": {
								"key": 80
							}
						},
						{
							"id": "on-button-pressed",
							"objectClass": "Gamepad",
							"sid": 629914202029864,
							"parameters": {
								"gamepad": "0",
								"button": "start-menu"
							}
						}
					],
					"actions": [],
					"sid": 169030990233266,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 260502943401004,
									"parameters": {
										"variable": "MENU_menu",
										"comparison": 0,
										"value": "\"None\""
									}
								}
							],
							"actions": [
								{
									"id": "release-pointer-lock",
									"objectClass": "Mouse",
									"sid": 335557789194446
								},
								{
									"callFunction": "menuSwitch",
									"sid": 606707072356545,
									"parameters": [
										"\"Main\"",
										"\"open\"",
										"0"
									]
								}
							],
							"sid": 883698027805401
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 995371395713002
								}
							],
							"actions": [
								{
									"callFunction": "menuSwitch",
									"sid": 432956636228665,
									"parameters": [
										"\"None\"",
										"\"close\"",
										"0"
									]
								},
								{
									"id": "request-pointer-lock",
									"objectClass": "Mouse",
									"sid": 794258781632469,
									"parameters": {
										"unadjusted-movement": false
									}
								}
							],
							"sid": 374604184397727
						}
					],
					"isOrBlock": true
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-any-touch-start",
							"objectClass": "Touch",
							"sid": 923083108906021
						},
						{
							"id": "is-touching-object",
							"objectClass": "Touch",
							"sid": 418153724303003,
							"parameters": {
								"object": "MobileButtons"
							}
						},
						{
							"id": "compare-animation-frame",
							"objectClass": "MobileButtons",
							"sid": 480239801718275,
							"parameters": {
								"comparison": 0,
								"number": "6"
							}
						},
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 746239072697455,
							"parameters": {
								"variable": "MENU_menu",
								"comparison": 0,
								"value": "\"None\""
							}
						}
					],
					"actions": [
						{
							"callFunction": "menuSwitch",
							"sid": 821234720737074,
							"parameters": [
								"\"Main\"",
								"\"open\"",
								"0"
							]
						}
					],
					"sid": 166032400112407
				}
			]
		}
	],
	"sid": 353286919087837
}